{"version":3,"sources":["components/OrderHistory/OrderHistory.module.css","components/AppHeader/AppHeader.module.css","components/App/App.module.css","images/loading.svg","utils/constants.js","utils/Api.ts","services/actions/burgerIngredients.ts","utils/LoginApi.ts","services/actions/currentSession.ts","services/hooks.ts","components/ProtectedRoute/ProtectedRoute.tsx","components/ProtectedRoute/ProtectedRouteAuth.tsx","components/AppHeader/AppHeader.tsx","components/BurgerIngredient/BurgerIngredient.tsx","components/BurgerIngredients/BurgerIngredietns.tsx","services/actions/burgerConstructor.ts","components/BasketItem/BasketItem.tsx","components/BurgerConstructor/BurgerConstructor.tsx","components/Profile/Profile.tsx","utils/functions.ts","components/OrderHistory/OrderItem.tsx","services/actions/wsAuthActions.ts","components/OrderHistory/OrderHistory.tsx","services/actions/wsActions.ts","pages/Account/Account.tsx","pages/Authorization/Login.tsx","pages/Authorization/Register.tsx","pages/Authorization/ForgotPassword.tsx","pages/Authorization/RecoverPassword.tsx","pages/IngredientDetailsPage/IngredientDetailsPage.tsx","pages/OrderFeed/OrderFeed.tsx","images/astronaut.png","pages/NotFound/NotFound.tsx","components/Modal/OrderData.tsx","pages/OrderDetailsPage/OrderDetailsPage.tsx","components/Modal/IngredientDetails.tsx","images/tick.gif","components/Modal/OrderDetails.tsx","services/middlewares/socketAuthMiddleware.ts","services/middlewares/socketMiddleware.ts","components/Modal/ModalOverlay.tsx","components/Modal/Modal.tsx","components/Modal/Loading.tsx","components/App/App.tsx","reportWebVitals.ts","services/reducers/burgerIngredients.ts","services/reducers/burgerConstructor.ts","services/reducers/currentSession.ts","services/reducers/orderFeed.ts","services/reducers/userOrderFeed.ts","services/reducers/index.ts","services/store.ts","index.tsx","pages/Account/Account.module.css","pages/IngredientDetailsPage/IngredientDetailsPage.module.css","pages/OrderFeed/OrderFeed.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/Profile/Profile.module.css","pages/NotFound/NotFound.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/BurgerIngredient/BurgerIngredient.module.css","components/Modal/Modal.module.css","pages/Authorization/Auth.module.css","components/BasketItem/BasketItem.module.css"],"names":["module","exports","WSS_URL","BASE_URL","DEFAULT_BUN","calories","carbohydrates","fat","image","loading","image_large","image_mobile","name","price","proteins","type","__v","_id","DEFAULT_ING","api","address","this","res","ok","json","Promise","reject","status","statusText","fetch","method","headers","then","handleResponse","orderArray","accessToken","body","JSON","stringify","CONSTANTS","GET_BURGER_INGREDIENTS_REQUEST","GET_BURGER_INGREDIENTS_SUCCESS","GET_BURGER_INGREDIENTS_FAILED","GET_SELECTED_BUN","GET_SELECTED_INGREDIENT","loginApi","console","log","refreshToken","localStorage","getItem","updateToken","data","setItem","catch","token","email","GET_CURRENT_USER_REQUEST","GET_CURRENT_USER_SUCCESS","GET_CURRENT_USER_FAILED","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAILED","LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","LOGIN_USER_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RECOVER_PASSWORD_REQUEST","RECOVER_PASSWORD_SUCCESS","RECOVER_PASSWORD_FAILED","LOGOUT_USER_REQUEST","LOGOUT_USER_SUCCESS","LOGOUT_USER_FAILED","getCurrentUser","jwt","dispatch","getUserInfo","currentUser","err","message","refreshJwt","removeItem","useSelector","selectorHook","useDispatch","dispatchHook","ProtectedRoute","children","redirect","rest","isUserAuth","state","currentSession","isCurrentUserAuth","isUserResetPassword","isCurrentUserChecked","currentUserChecked","init","a","React","useEffect","className","AppStyles","centeredComponent","render","to","ProtectedRouteAuth","AppHeader","isConstructor","useRouteMatch","path","exact","isFeed","isProfile","HeaderStyles","header","header__nav","header__list","header__listItem","header__link","activeClassName","header__link_active","header__linkText","header__logo","BurgerIngredient","props","location","useLocation","useState","itemCount","setItemCount","bunCount","setBunCount","burgerConstructorArray","burgerConstructor","selectedBun","burgerIngredients","card","array","filter","item","length","useDrag","isDrag","dragRef","handleCardClick","selectedIngredient","openModal","pathname","background","BurgerIngredientStyle","ingredient","onClick","ref","count","size","src","alt","ingredient__image","ingredient__priceBox","ingredient__price","ingredient__text","BurgerIngredients","selectedDiv","useRef","bunsRef","sauceRef","mainRef","current","setCurrent","burgerIngredientsArray","filterArray","string","obj","bunsArray","sauceArray","mainArray","burgerIngredient","handleTabClick","scrollIntoView","behavior","BurgerIngredientsStyle","ingredients","style","display","value","active","ingredients__menuContainer","onScroll","topDivFrame","offsetTop","bunsClientRect","getBoundingClientRect","top","sauceClientRect","mainClientRect","ingredients__list","map","GET_BURGER_CONSTRUCTOR_REQUEST","GET_BURGER_CONSTRUCTOR_SUCCESS","GET_BURGER_CONSTRUCTOR_FAILED","ADD_BURGER_CONSTRUCTOR_ITEM","ADD_BUN_FAILED","MOVE_BURGER_CONSTRUCTOR_ITEM","DELETE_BURGER_CONSTRUCTOR_ITEM","RESET_BURGER_CONSTRUCTOR","BasketItem","cardData","useDrop","accept","hover","monitor","dragIndex","index","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","moveConstructorItem","dropTarget","collect","isDragging","opacity","handleDeleteItem","deleteConstructorItem","BasketStyles","basketItem__listItem","iconBox","text","thumbnail","handleClose","BurgerConstructor","totalPrice","setTotalPrice","setSubmitDisabled","history","useHistory","cardsData","bunPrice","drop","key","uuidv4","addConstructorItem","isHover","isOver","filteredDigits","reduce","prev","curr","parseInt","counTotalPrice","BurgerConstructorStyles","basket","basket__list_modified","basket__list","basket__listItem","isLocked","basket__listContainer","basket__container","basket__totalContainer","bunId","newArray","push","getIngredientIds","sendOrder","orderData","finally","Profile","setName","setEmail","password","setPassword","nameDisabled","setNameDisabled","emailDisabled","setEmailDisabled","passwordDisabled","setPasswordDisabled","nameInputRef","emailInputRef","passwordInputRef","onIconClick","input","setState","setTimeout","focus","setInputData","user","ProfileStyles","profile","profileList","profileListItem","placeholder","onChange","e","target","icon","error","errorText","disabled","buttonBox","setUserInfo","handleSaveClick","getIngr","Ingr","id","forEach","getTotalPrice","totalSum","ingrPrices","i","getCurrentDate","date","isToday","isYesterday","format","filterOrderFeed","OrderItem","setStyle","setStatus","isAuthPath","setAuthPath","time","Date","createdAt","currentDay","ingrArray","OrderStyles","listItem","link","textBox","number","feed","visible","hidden","color","dataBox","ingrList","ingItem","img","ingDigit","slice","textContainer","WS_AUTH_CONNECTION_START","WS_AUTH_CONNECTION_SUCCESS","WS_AUTH_CONNECTION_ERROR","WS_AUTH_CONNECTION_CLOSED","WS_AUTH_GET_MESSAGE","wsAuthConnectionStart","wsAuthConnectionClose","OrderHistory","orderFeed","userOrderFeed","isPageLoading","orderHistory","orderFeedData","orders","isAuth","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","wsConnectionStart","wsConnectionClose","Account","url","AccountStyles","account","nav","list","link_active","button","func","signOut","logoutUser","contentBox","Login","inputRef","handleSubmit","evt","preventDefault","signIn","success","loginUser","AuthStyles","login","heading","form","onSubmit","fieldset","Register","mailInputRef","register","registerUser","ForgotPassword","resetPassword","forgotPassword","RecoverPassword","setToken","updatePassword","recoverPassword","IngredientDetailsPage","setCardData","useParams","ing","IngStyles","title_modified","imgContainer","ingImage","statsList","statsListItem","category","OrderFeed","orderFeedArray","finishedOrders","currentOrders","wsConnected","FeedStyles","ordersData","orderStatusBox","orderList","orderListReady","numBox","total","totalToday","NotFound","NotFoundStyles","notFound","title","astronaut","imgLoading","OrderData","setOrderStatus","undefined","uniqueArray","pos","indexOf","numberOfIngrs","idArray","getNumberOfIngrs","isModal","ModalStyles","orderBox","pageBox","imgBox","ingrText","priceBox","priceContainer","OrderDetailsPage","IngredientDetails","modal__contentBox","modal__title_modified","modal__imgContainer","modal__ingImage","modal__statsList","modal__statsListItem","modal__category","OrderDetails","wsUrl","modal__title_shadow","order","modal__subtitle","tick","modal__image","modal__textContainer","modal__text","ModalOverlay","modal_overlay","closeModal","Modal","window","addEventListener","removeEventListener","isOpen","modal_opened","modal","modal__container","modal__close_modified","Loading","modal__loading","App","isModalOpenIngredients","setModalOpenIngredients","isModalOpenOrder","setModalOpenOrder","isModalOpenOrderData","setModalOpenOrderData","isModalOpenUserOrderData","setModalOpenUserOrderData","action","isOrderLoading","isAccountLoading","IngredientModal","OrderModal","OrderDataModal","getCardsData","componentContainer","DndProvider","backend","HTML5Backend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","burgerIngredientsRequest","burgerIngredientsFailed","burgerConstructorRequest","burgerConstructorFailed","currentUserRequest","currentUserFailed","registerRequest","registerFailed","loginRequest","loginFailed","logoutRequest","logoutFailed","wsError","rootReducer","combineReducers","dragItem","hoveredItem","payload","store","createStore","composeWithDevTools","applyMiddleware","socket","next","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","send","correctedToken","replace","thunk","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9b8f9b08.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderHistory\":\"OrderHistory_orderHistory__2hPTP\",\"list\":\"OrderHistory_list__H-i4I\",\"profileList\":\"OrderHistory_profileList__3bboW OrderHistory_list__H-i4I\",\"listItem\":\"OrderHistory_listItem__5Zn4r\",\"link\":\"OrderHistory_link__1Emag\",\"textBox\":\"OrderHistory_textBox__BQXOn\",\"dataBox\":\"OrderHistory_dataBox__1XskK\",\"ingrList\":\"OrderHistory_ingrList__1KK2O\",\"ingItem\":\"OrderHistory_ingItem__2CK14\",\"ingDigit\":\"OrderHistory_ingDigit__2RU3J\",\"img\":\"OrderHistory_img__ELUq2\",\"textContainer\":\"OrderHistory_textContainer__3-tSH\",\"visible\":\"OrderHistory_visible__NK5Aa\",\"hidden\":\"OrderHistory_hidden__15R44\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__366Sh\",\"header__nav\":\"AppHeader_header__nav__2J_ye\",\"header__list\":\"AppHeader_header__list__2KXuY\",\"header__link\":\"AppHeader_header__link__3jQ4M\",\"header__link_active\":\"AppHeader_header__link_active__uSDQG\",\"header__linkText\":\"AppHeader_header__linkText__1kRNB\",\"header__logo\":\"AppHeader_header__logo__YrIru\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2NZLj\",\"componentContainer\":\"App_componentContainer__3r7bB\",\"centeredComponent\":\"App_centeredComponent__2a37d\",\"logo\":\"App_logo__1_oR2\"};","export default __webpack_public_path__ + \"static/media/loading.0f209bc7.svg\";","import loading from '../images/loading.svg';\r\n\r\nexport const WSS_URL = 'wss://norma.nomoreparties.space';\r\nexport const BASE_URL = 'https://norma.nomoreparties.space/api';\r\n\r\nexport const DEFAULT_ORDER = {\r\n  name: \"DEFAULT_ORDER\",\r\n  order: {\r\n      number: 9999\r\n  },\r\n  success: true\r\n};\r\n\r\nexport const DEFAULT_BUN = {\r\n  calories: 0,\r\n  carbohydrates: 0,\r\n  fat: 0,\r\n  image: loading,\r\n  image_large: loading,\r\n  image_mobile: loading,\r\n  name: \"Перетяните булочку сюда\",\r\n  price: 0,\r\n  proteins: 0,\r\n  type: \"bun\",\r\n  __v: 0,\r\n  _id: '0',\r\n}\r\n\r\nexport const DEFAULT_ING = {\r\n  calories: 0,\r\n  carbohydrates: 0,\r\n  fat: 0,\r\n  image: loading,\r\n  image_large: loading,\r\n  image_mobile: loading,\r\n  name: \"Какой-то ингридиент\",\r\n  price: 0,\r\n  proteins: 0,\r\n  type: \"main\",\r\n  __v: 0,\r\n  _id: '0',\r\n}\r\n\r\nexport const DEFAULT_USER = {\r\n  user: {\r\n    email: \"burger-lover@stellar-burgers.com\",\r\n    name: \"Норма\"\r\n  }\r\n}","import * as CONSTANTS from './constants';\r\n\r\ntype TOrderArray = {\r\n  ingredients: (string | undefined)[];\r\n}\r\n\r\nclass Api {\r\n  private address: string;\r\n  constructor({ address }:  {address: string}) {\r\n    this.address = address;\r\n  }\r\n\r\n  handleResponse<T>(res: Response): Promise<T> {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  getCardsData() {\r\n    return fetch(`${this.address}/ingredients`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  };\r\n\r\n  sendOrder(orderArray: TOrderArray, accessToken: string) {\r\n    return fetch(`${this.address}/orders`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Authorization': accessToken,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(orderArray),\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  };\r\n};\r\n\r\nexport const api = new Api({\r\n  address: CONSTANTS.BASE_URL,\r\n});","import { api } from '../../utils/Api';\r\nimport { TBasketCard, AppThunk } from '../../types';\r\n\r\nexport const GET_BURGER_INGREDIENTS_REQUEST: 'GET_BURGER_INGREDIENTS_REQUEST' = 'GET_BURGER_INGREDIENTS_REQUEST';\r\nexport const GET_BURGER_INGREDIENTS_SUCCESS: 'GET_BURGER_INGREDIENTS_SUCCESS' = 'GET_BURGER_INGREDIENTS_SUCCESS';\r\nexport const GET_BURGER_INGREDIENTS_FAILED: 'GET_BURGER_INGREDIENTS_FAILED' = 'GET_BURGER_INGREDIENTS_FAILED';\r\n\r\nexport const GET_SELECTED_BUN: 'GET_SELECTED_BUN' = 'GET_SELECTED_BUN';\r\nexport const GET_SELECTED_INGREDIENT: 'GET_SELECTED_INGREDIENT' = 'GET_SELECTED_INGREDIENT';\r\n\r\nexport interface IGetBurgerIngredientRequestAction {\r\n  readonly type: typeof GET_BURGER_INGREDIENTS_REQUEST;\r\n}\r\n\r\nexport interface IGetBurgerIngredientSuccessAction {\r\n  readonly type: typeof GET_BURGER_INGREDIENTS_SUCCESS;\r\n  readonly burgerIngredientsArray: Array<TBasketCard>\r\n}\r\n\r\nexport interface IGetBurgerIngredientFailedAction {\r\n  readonly type: typeof GET_BURGER_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport interface IGetSelectedBun {\r\n  readonly type: typeof GET_SELECTED_BUN;\r\n  readonly selectedBun: TBasketCard;\r\n}\r\n\r\nexport interface IGetSelectedIngredient {\r\n  readonly type: typeof GET_SELECTED_INGREDIENT;\r\n  readonly selectedIngredient: TBasketCard;\r\n}\r\n\r\nexport type TBurgerIngredientsActions = \r\n| IGetBurgerIngredientRequestAction\r\n| IGetBurgerIngredientSuccessAction\r\n| IGetBurgerIngredientFailedAction\r\n| IGetSelectedBun\r\n| IGetSelectedIngredient\r\n\r\nexport function getIngredientsData() {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: GET_BURGER_INGREDIENTS_REQUEST,\r\n    });\r\n    api.getCardsData()\r\n      .then((res: any) => {\r\n        console.log(res);\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_BURGER_INGREDIENTS_SUCCESS,\r\n            burgerIngredientsArray: res.data,\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_BURGER_INGREDIENTS_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch({\r\n          type: GET_BURGER_INGREDIENTS_FAILED,\r\n        });\r\n      })\r\n    };\r\n}\r\n\r\nexport function setSelectedBun(bun: TBasketCard) {\r\n  return ({\r\n    type: GET_SELECTED_BUN,\r\n    selectedBun: bun,\r\n  });\r\n}\r\n\r\nexport function setSelectedIngredient(ingr: TBasketCard) {\r\n  return ({\r\n    type: GET_SELECTED_INGREDIENT,\r\n    selectedIngredient: ingr,\r\n  });\r\n}","import { BASE_URL } from \"./constants\";\r\n\r\nimport {TUserData, TResetPassword} from '../types'\r\n\r\nclass LoginApi {\r\n  private address: string;\r\n  constructor({ address }:  {address: string}) {\r\n    this.address = address;\r\n  }\r\n\r\n  handleResponse<T>(res: Response): Promise<T> {\r\n    if (res.status === 403) {\r\n      console.log('403 Error')\r\n      const refreshToken = localStorage.getItem('refreshToken');\r\n      this.updateToken(refreshToken)!\r\n        .then((data: unknown | any) => {\r\n          console.log('updating tokens');\r\n          localStorage.setItem('accessToken', data.accessToken);\r\n          localStorage.setItem('refreshToken', data.refreshToken);\r\n        })\r\n        .catch(() => {\r\n          return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\r\n        })\r\n    } else if (!res.ok) {\r\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\r\n    }\r\n    return res.json();\r\n  };\r\n\r\n  updateToken(refreshToken: string | null) {\r\n    if (!refreshToken) {\r\n      console.log('refresh token is missing');\r\n    } else {\r\n      return fetch(`${this.address}/auth/token`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ \"token\": refreshToken }),\r\n      })\r\n      .then((res) =>\r\n        this.handleResponse(res)\r\n      )\r\n    }\r\n  }\r\n\r\n  register(data: TUserData) {\r\n    return fetch(`${this.address}/auth/register`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  };\r\n\r\n  signIn(data: TUserData) {\r\n    return fetch(`${this.address}/auth/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  };\r\n\r\n  signOut(refreshToken: string) {\r\n    return fetch(`${this.address}/auth/logout`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({token: refreshToken}),\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  }\r\n\r\n  resetPassword(email: TUserData) {\r\n    return fetch(`${this.address}/password-reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(email),\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  };\r\n\r\n  updatePassword(data: TResetPassword) {\r\n    return fetch(`${this.address}/password-reset/reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n    .then((res) =>\r\n      this.handleResponse(res)\r\n    )\r\n  };\r\n\r\n  getUserInfo(accessToken: string) {\r\n    return fetch(`${this.address}/auth/user`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Authorization': accessToken,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n    .then((res) => {\r\n      return this.handleResponse(res)\r\n    })\r\n  }\r\n\r\n  setUserInfo(data: TUserData, accessToken: string) {\r\n    return fetch(`${this.address}/auth/user`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        'Authorization': accessToken,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n    .then((res) =>\r\n        this.handleResponse(res)\r\n    )\r\n  }\r\n};\r\n\r\nexport const loginApi = new LoginApi({\r\n  address: BASE_URL,\r\n});","import { loginApi } from '../../utils/LoginApi';\r\nimport { TUserData, TResetPassword, TUser, AppThunk, TLocationState } from '../../types'\r\n\r\nexport const GET_CURRENT_USER_REQUEST: 'GET_CURRENT_USER_REQUEST' = 'GET_CURRENT_USER_REQUEST';\r\nexport const GET_CURRENT_USER_SUCCESS: 'GET_CURRENT_USER_SUCCESS'  = 'GET_CURRENT_USER_SUCCESS';\r\nexport const GET_CURRENT_USER_FAILED: 'GET_CURRENT_USER_FAILED' = 'GET_CURRENT_USER_FAILED';\r\n\r\nexport const REGISTER_USER_REQUEST: 'REGISTER_USER_REQUEST' = 'REGISTER_USER_REQUEST';\r\nexport const REGISTER_USER_SUCCESS: 'REGISTER_USER_SUCCESS' = 'REGISTER_USER_SUCCESS';\r\nexport const REGISTER_USER_FAILED: 'REGISTER_USER_FAILED' = 'REGISTER_USER_FAILED';\r\n\r\nexport const LOGIN_USER_REQUEST: 'LOGIN_USER_REQUEST' = 'LOGIN_USER_REQUEST';\r\nexport const LOGIN_USER_SUCCESS: 'LOGIN_USER_SUCCESS' = 'LOGIN_USER_SUCCESS';\r\nexport const LOGIN_USER_FAILED: 'LOGIN_USER_FAILED' = 'LOGIN_USER_FAILED';\r\n\r\nexport const FORGOT_PASSWORD_REQUEST: 'FORGOT_PASSWORD_REQUEST' = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_SUCCESS: 'FORGOT_PASSWORD_SUCCESS' = 'FORGOT_PASSWORD_SUCCESS';\r\nexport const FORGOT_PASSWORD_FAILED: 'FORGOT_PASSWORD_FAILED' = 'FORGOT_PASSWORD_FAILED';\r\n\r\nexport const RECOVER_PASSWORD_REQUEST: 'RECOVER_PASSWORD_REQUEST' = 'RECOVER_PASSWORD_REQUEST';\r\nexport const RECOVER_PASSWORD_SUCCESS: 'RECOVER_PASSWORD_SUCCESS' = 'RECOVER_PASSWORD_SUCCESS';\r\nexport const RECOVER_PASSWORD_FAILED: 'RECOVER_PASSWORD_FAILED' = 'RECOVER_PASSWORD_FAILED';\r\n\r\nexport const LOGOUT_USER_REQUEST: 'LOGOUT_USER_REQUEST' = 'LOGOUT_USER_REQUEST';\r\nexport const LOGOUT_USER_SUCCESS: 'LOGOUT_USER_SUCCESS' = 'LOGOUT_USER_SUCCESS';\r\nexport const LOGOUT_USER_FAILED: 'LOGOUT_USER_FAILED' = 'LOGOUT_USER_FAILED';\r\n\r\nexport const CHECK_CURRENT_USER_AUTH: 'CHECK_CURRENT_USER_AUTH' = 'CHECK_CURRENT_USER_AUTH';\r\nexport const CHECK_RESET_PASSWORD_VISIT: 'CHECK_RESET_PASSWORD_VISIT' = 'CHECK_RESET_PASSWORD_VISIT';\r\n\r\nexport interface IGetCurrentUserRequestAction {\r\n  readonly type: typeof GET_CURRENT_USER_REQUEST;\r\n}\r\n\r\nexport interface IGetCurrentUserSuccessAction {\r\n  readonly type: typeof GET_CURRENT_USER_SUCCESS;\r\n  readonly currentUser: TUser;\r\n}\r\n\r\nexport interface IGetCurrentUserFailedAction {\r\n  readonly type: typeof GET_CURRENT_USER_FAILED;\r\n}\r\n\r\nexport interface IRegisterUserRequestAction {\r\n  readonly type: typeof REGISTER_USER_REQUEST;\r\n}\r\n\r\nexport interface IRegisterUserSuccessAction {\r\n  readonly type: typeof REGISTER_USER_SUCCESS;\r\n  readonly currentUser: TUser;\r\n}\r\n\r\nexport interface IRegisterUserFailedAction {\r\n  readonly type: typeof REGISTER_USER_FAILED;\r\n}\r\n\r\nexport interface ILoginUserRequestAction {\r\n  readonly type: typeof LOGIN_USER_REQUEST;\r\n}\r\n\r\nexport interface ILoginUserSuccessAction {\r\n  readonly type: typeof LOGIN_USER_SUCCESS;\r\n  readonly currentUser: TUser;\r\n}\r\n\r\nexport interface ILoginUserFailedAction {\r\n  readonly type: typeof LOGIN_USER_FAILED;\r\n}\r\n\r\nexport interface IForgotPasswordRequestAction {\r\n  readonly type: typeof FORGOT_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IForgotPasswordSuccessAction {\r\n  readonly type: typeof FORGOT_PASSWORD_SUCCESS;\r\n}\r\n\r\nexport interface IForgotPasswordFailedAction {\r\n  readonly type: typeof FORGOT_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface IRecoverPasswordRequestAction {\r\n  readonly type: typeof RECOVER_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IRecoverPasswordSuccessAction {\r\n  readonly type: typeof RECOVER_PASSWORD_SUCCESS;\r\n}\r\n\r\nexport interface IRecoverPasswordFailedAction {\r\n  readonly type: typeof RECOVER_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface ILogoutUserRequestAction {\r\n  readonly type: typeof LOGOUT_USER_REQUEST;\r\n}\r\n\r\nexport interface ILogoutUserSuccessAction {\r\n  readonly type: typeof LOGOUT_USER_SUCCESS;\r\n}\r\n\r\nexport interface ILogoutUserFailedAction {\r\n  readonly type: typeof LOGOUT_USER_FAILED;\r\n}\r\n\r\nexport interface ICheckCurrentUserAuth {\r\n  readonly type: typeof CHECK_CURRENT_USER_AUTH;\r\n}\r\n\r\nexport interface ICheckResetPasswordVisit {\r\n  readonly type: typeof CHECK_RESET_PASSWORD_VISIT;\r\n}\r\n\r\nexport type TCurrentSessionAction = \r\n| IGetCurrentUserRequestAction\r\n| IGetCurrentUserSuccessAction\r\n| IGetCurrentUserFailedAction\r\n\r\n| IRegisterUserRequestAction\r\n| IRegisterUserSuccessAction\r\n| IRegisterUserFailedAction\r\n\r\n| ILoginUserRequestAction\r\n| ILoginUserSuccessAction\r\n| ILoginUserFailedAction\r\n\r\n| IForgotPasswordRequestAction\r\n| IForgotPasswordSuccessAction\r\n| IForgotPasswordFailedAction\r\n\r\n| IRecoverPasswordRequestAction\r\n| IRecoverPasswordSuccessAction\r\n| IRecoverPasswordFailedAction\r\n\r\n| ILogoutUserRequestAction\r\n| ILogoutUserSuccessAction\r\n| ILogoutUserFailedAction\r\n\r\n| ICheckCurrentUserAuth\r\n| ICheckResetPasswordVisit\r\n\r\nexport function getCurrentUser() {\r\n  const jwt = localStorage.getItem('accessToken');\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: GET_CURRENT_USER_REQUEST,\r\n    });\r\n    loginApi.getUserInfo(jwt!)\r\n      .then((data) => {\r\n        dispatch({\r\n          type: GET_CURRENT_USER_SUCCESS,\r\n          currentUser: data,\r\n        })\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch({\r\n          type: GET_CURRENT_USER_FAILED,\r\n        });\r\n        if (err.message === \"jwt expired\") {\r\n          console.log(\"token refresh started\");\r\n          refreshToken();\r\n          getCurrentUser()\r\n        }\r\n      })\r\n  }\r\n};\r\n\r\nfunction refreshToken() {\r\n  const refreshJwt = localStorage.getItem(\"refreshToken\");\r\n    localStorage.removeItem(\"accessToken\");\r\n    loginApi\r\n      .updateToken(refreshJwt)!\r\n      .then((data: any) => {\r\n        localStorage.setItem(\"accessToken\", data.accessToken);\r\n        console.log(\"token refresh success\");\r\n        getCurrentUser();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n}\r\n\r\nexport function registerUser(data: TUserData, func: () => void) {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type:REGISTER_USER_REQUEST,\r\n    });\r\n    loginApi.register(data)\r\n      .then(() => {\r\n        dispatch({\r\n          type: REGISTER_USER_SUCCESS\r\n        });\r\n        func();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch({\r\n          type: REGISTER_USER_FAILED,\r\n        });\r\n      })\r\n  }\r\n}\r\n\r\nexport function loginUser(data: TUserData, func: () => void) {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: LOGIN_USER_REQUEST,\r\n    });\r\n    loginApi\r\n      .signIn(data)\r\n      .then((data: any) => {\r\n        if (data && data.success) {\r\n          localStorage.setItem(\"accessToken\", data.accessToken);\r\n          localStorage.setItem(\"refreshToken\", data.refreshToken);\r\n          dispatch({\r\n            type: LOGIN_USER_SUCCESS,\r\n            currentUser: data,\r\n          })\r\n          func();\r\n        } else {\r\n          dispatch({\r\n            type: LOGIN_USER_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch({\r\n          type: LOGIN_USER_FAILED,\r\n        });\r\n      });\r\n  }\r\n};\r\n\r\nexport function logoutUser(refreshJwt: string, func: () => void) {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: LOGOUT_USER_REQUEST,\r\n    });\r\n    loginApi\r\n    .signOut(refreshJwt)\r\n    .then(() => {\r\n      dispatch({\r\n        type: LOGOUT_USER_SUCCESS,\r\n      });\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n      func();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      dispatch({\r\n        type: LOGOUT_USER_FAILED,\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport function forgotPassword(data: TUserData, func: () => void) {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: FORGOT_PASSWORD_REQUEST,\r\n    });\r\n    loginApi\r\n      .resetPassword(data)\r\n      .then(() => {\r\n        dispatch({\r\n          type: FORGOT_PASSWORD_SUCCESS,\r\n        })\r\n        func();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch({\r\n          type: FORGOT_PASSWORD_FAILED,\r\n        });\r\n      });\r\n  }\r\n};\r\n\r\nexport function recoverPassword(data: TResetPassword, func: () => void) {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: RECOVER_PASSWORD_REQUEST,\r\n    });\r\n    loginApi\r\n      .updatePassword(data)\r\n      .then(() => {\r\n        dispatch({\r\n          type: RECOVER_PASSWORD_SUCCESS,\r\n        })\r\n        func();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch({\r\n          type: RECOVER_PASSWORD_FAILED,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook\r\n} from 'react-redux';\r\nimport { AppDispatch, AppThunk } from '../types';\r\nimport { RootState } from '../services/store';\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { getCurrentUser } from '../../services/actions/currentSession';\r\nimport AppStyles from '../App/App.module.css';\r\n\r\ninterface IProtectedRoute {\r\n  path: string; \r\n  redirect?: boolean;\r\n  exact?: boolean;\r\n}\r\n\r\nconst ProtectedRoute: React.FC<IProtectedRoute> = ({ children, redirect, ...rest }) => {\r\n\r\n  const isUserAuth = useSelector(\r\n    (state) => state.currentSession.isCurrentUserAuth\r\n  );\r\n\r\n  const isUserResetPassword = useSelector(\r\n    (state) => state.currentSession.isUserResetPassword\r\n  );\r\n\r\n  const isCurrentUserChecked = useSelector(\r\n    (state) => state.currentSession.currentUserChecked\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const init = async () => {\r\n    const accessToken = localStorage.getItem(\"accessToken\");\r\n    if (accessToken) {\r\n      dispatch(getCurrentUser());\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  if (localStorage.getItem(\"accessToken\") && !isCurrentUserChecked) {\r\n    return <div className={`${AppStyles.centeredComponent} text text_type_main-large`}>Загрузка...</div>\r\n  }\r\n\r\n  if (redirect) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={() =>\r\n          isUserResetPassword ? children : <Redirect to=\"/forgot-password\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() => (isUserAuth ? children : <Redirect to=\"/login\" />)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { getCurrentUser } from '../../services/actions/currentSession';\r\n\r\n\r\n\r\ninterface IProtectedRouteAuth {\r\n  path: string;\r\n}\r\n\r\nconst ProtectedRouteAuth: React.FC<IProtectedRouteAuth> = ({ children, ...rest }) => {\r\n\r\n  const isUserAuth = useSelector(\r\n    (state) => state.currentSession.isCurrentUserAuth\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const init = async () => {\r\n    const accessToken = localStorage.getItem(\"accessToken\");\r\n    if (accessToken) {\r\n      dispatch(getCurrentUser());\r\n    } \r\n  };\r\n\r\n  React.useEffect(() => {\r\n    init();\r\n  }, []);\r\n  \r\n  return (\r\n    <Route {...rest} render={() => (!isUserAuth ? children : <Redirect to='/' />)} />\r\n  )\r\n};\r\n\r\nexport default ProtectedRouteAuth;","import HeaderStyles from \"./AppHeader.module.css\";\r\nimport {\r\n  BurgerIcon,\r\n  Logo,\r\n  ListIcon,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { NavLink, useRouteMatch } from \"react-router-dom\";\r\n\r\nfunction AppHeader() {\r\n  const isConstructor = !!useRouteMatch({ path: \"/\", exact: true });\r\n  const isFeed = !!useRouteMatch(\"/feed\");\r\n  const isProfile = !!useRouteMatch(\"/account\");\r\n\r\n  return (\r\n    <header className={`${HeaderStyles.header} pb-4 pt-4`}>\r\n      <nav className={HeaderStyles.header__nav}>\r\n        <ul className={HeaderStyles.header__list}>\r\n          <li className={HeaderStyles.header__listItem}>\r\n            <NavLink\r\n              exact\r\n              to={\"/\"}\r\n              className={HeaderStyles.header__link}\r\n              activeClassName={HeaderStyles.header__link_active}\r\n            >\r\n              <BurgerIcon type={isConstructor ? \"primary\" : \"secondary\"} />\r\n              <p className={`${HeaderStyles.header__linkText} ml-2`}>\r\n                Конструктор\r\n              </p>\r\n            </NavLink>\r\n          </li>\r\n          <li className={`${HeaderStyles.header__listItem} ml-2`}>\r\n            <NavLink\r\n              to={\"/feed\"}\r\n              className={HeaderStyles.header__link}\r\n              activeClassName={HeaderStyles.header__link_active}\r\n            >\r\n              <ListIcon type={isFeed ? \"primary\" : \"secondary\"} />\r\n              <p className={`${HeaderStyles.header__linkText} ml-2`}>\r\n                Лента Заказов\r\n              </p>\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n        <div className={HeaderStyles.header__logo}>\r\n          <NavLink exact to={\"/\"}>\r\n            <Logo />\r\n          </NavLink>\r\n        </div>\r\n        <NavLink\r\n          to={\"/account\"}\r\n          className={HeaderStyles.header__link}\r\n          activeClassName={HeaderStyles.header__link_active}\r\n        >\r\n          <ProfileIcon type={isProfile ? \"primary\" : \"secondary\"} />\r\n          <p className={`${HeaderStyles.header__linkText} ml-2`}>\r\n            Личный Кабинет\r\n          </p>\r\n        </NavLink>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","import React from \"react\";\r\n\r\nimport BurgerIngredientStyle from \"./BurgerIngredient.module.css\";\r\nimport {\r\n  CurrencyIcon,\r\n  Counter,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { setSelectedIngredient } from \"../../services/actions/burgerIngredients\";\r\nimport { useDrag } from \"react-dnd\";\r\n\r\nimport { TBasketCard } from \"../../types\";\r\n\r\ninterface IBurgerIngredient {\r\n  card: TBasketCard;\r\n  openModal: () => void;\r\n}\r\n\r\nconst BurgerIngredient: React.FC<IBurgerIngredient> = (props) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const [itemCount, setItemCount] = React.useState<number>(0);\r\n  const [bunCount, setBunCount] = React.useState<number>(0);\r\n\r\n  const burgerConstructorArray = useSelector(\r\n    (state) => state.burgerConstructor.burgerConstructorArray\r\n  );\r\n\r\n  const selectedBun = useSelector(\r\n    (state) => state.burgerIngredients.selectedBun\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (props.card.type === \"bun\" && selectedBun._id === props.card._id) {\r\n      setBunCount(2);\r\n    } else {\r\n      setBunCount(0);\r\n    }\r\n    const array = burgerConstructorArray.filter(\r\n      (item: TBasketCard) => item._id === props.card._id\r\n    );\r\n    setItemCount(array.length);\r\n  }, [burgerConstructorArray, selectedBun]);\r\n\r\n  const [{ isDrag }, dragRef]: any = useDrag({\r\n    type: \"ingr\",\r\n    item: props.card,\r\n  });\r\n\r\n  function handleCardClick(card: TBasketCard) {\r\n    dispatch(setSelectedIngredient(card));\r\n    props.openModal();\r\n  }\r\n\r\n  if (!props.card || isDrag) {\r\n    return null;\r\n  } else {\r\n    return (\r\n      <Link\r\n        to={{\r\n          pathname: `/ingredient/${props.card._id}`,\r\n          state: { background: location },\r\n        }}\r\n        className={`${BurgerIngredientStyle.ingredient} ml-4 mr-4 mb-8`}\r\n        onClick={() => handleCardClick(props.card)}\r\n        ref={dragRef}\r\n      >\r\n        <Counter\r\n          count={props.card.type !== \"bun\" ? itemCount : bunCount}\r\n          size=\"default\"\r\n        />\r\n        <img\r\n          src={props.card.image}\r\n          alt={props.card.name}\r\n          className={`${BurgerIngredientStyle.ingredient__image} ml-4 mr-4`}\r\n        />\r\n        <div className={BurgerIngredientStyle.ingredient__priceBox}>\r\n          <p\r\n            className={`${BurgerIngredientStyle.ingredient__price} text text_type_digits-default mb-1 mt-1`}\r\n          >\r\n            {props.card.price}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n        <p className={BurgerIngredientStyle.ingredient__text}>\r\n          {props.card.name}\r\n        </p>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BurgerIngredient;\r\n","import React from \"react\";\r\nimport BurgerIngredientsStyle from \"./BurgerIngredients.module.css\";\r\n\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport BurgerIngredient from \"../BurgerIngredient/BurgerIngredient\";\r\nimport { TBasketCard } from \"../../types\";\r\n\r\ninterface IBurgerIngredients {\r\n  openModal: () => void;\r\n}\r\n\r\nconst BurgerIngredients: React.FC<IBurgerIngredients> = (props) => {\r\n  const selectedDiv = React.useRef<HTMLDivElement>(null);\r\n  const bunsRef = React.useRef<HTMLHeadingElement>(null);\r\n  const sauceRef = React.useRef<HTMLHeadingElement>(null);\r\n  const mainRef = React.useRef<HTMLHeadingElement>(null);\r\n  const [current, setCurrent] = React.useState<string>(\"buns\");\r\n  const openModal = props.openModal;\r\n\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n\r\n  function filterArray(string: string) {\r\n    return burgerIngredientsArray.filter((obj: TBasketCard) => obj.type === string);\r\n  }\r\n\r\n  const bunsArray = filterArray(\"bun\");\r\n  const sauceArray = filterArray(\"sauce\");\r\n  const mainArray = filterArray(\"main\");\r\n\r\n  function handleTabs() {\r\n    const topDivFrame = selectedDiv.current!.offsetTop;\r\n    const bunsClientRect = bunsRef.current!.getBoundingClientRect().top;\r\n    const sauceClientRect = sauceRef.current!.getBoundingClientRect().top - 150;\r\n    const mainClientRect = mainRef.current!.getBoundingClientRect().top - 150;\r\n\r\n    if (topDivFrame >= bunsClientRect && topDivFrame <= sauceClientRect) {\r\n      setCurrent(\"buns\");\r\n    } else if (\r\n      topDivFrame >= sauceClientRect &&\r\n      topDivFrame <= mainClientRect\r\n    ) {\r\n      setCurrent(\"sauce\");\r\n    } else if (topDivFrame >= mainClientRect) {\r\n      setCurrent(\"main\");\r\n    }\r\n  }\r\n\r\n  const burgerIngredient = (card: TBasketCard) => (\r\n    <BurgerIngredient card={card} key={card._id} openModal={openModal} />\r\n  );\r\n\r\n  function handleTabClick(string: string, ref: Element) {\r\n    if (ref !== null) {\r\n      setCurrent(string);\r\n      console.log(ref);\r\n      ref.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className={BurgerIngredientsStyle.ingredients}>\r\n      <h1 className=\"text text_type_main-large mb-5 mt-10\">Соберите бургер</h1>\r\n      <div style={{ display: \"flex\" }}>\r\n        <Tab\r\n          value=\"buns\"\r\n          active={current === \"buns\"}\r\n          onClick={() => handleTabClick(\"buns\", bunsRef.current!)}\r\n        >\r\n          Булки\r\n        </Tab>\r\n        <Tab\r\n          value=\"sauce\"\r\n          active={current === \"sauce\"}\r\n          onClick={() => handleTabClick(\"sauce\", sauceRef.current!)}\r\n        >\r\n          Соусы\r\n        </Tab>\r\n        <Tab\r\n          value=\"main\"\r\n          active={current === \"main\"}\r\n          onClick={() => handleTabClick(\"main\", mainRef.current!)}\r\n        >\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div\r\n        className={BurgerIngredientsStyle.ingredients__menuContainer}\r\n        ref={selectedDiv}\r\n        onScroll={handleTabs}\r\n      >\r\n        <h2 className=\"text text_type_main-medium mb-6 mt-10\" ref={bunsRef}>\r\n          Булки\r\n        </h2>\r\n        <ul className={BurgerIngredientsStyle.ingredients__list}>\r\n          {bunsArray.map((card: TBasketCard) => burgerIngredient(card))}\r\n        </ul>\r\n        <h2 className=\"text text_type_main-medium mb-6 mt-10\" ref={sauceRef}>\r\n          Соусы\r\n        </h2>\r\n        <ul className={BurgerIngredientsStyle.ingredients__list}>\r\n          {sauceArray.map((card: TBasketCard) => burgerIngredient(card))}\r\n        </ul>\r\n        <h2 className=\"text text_type_main-medium mb-6 mt-10\" ref={mainRef}>\r\n          Начинки\r\n        </h2>\r\n        <ul className={BurgerIngredientsStyle.ingredients__list}>\r\n          {mainArray.map((card: TBasketCard) => burgerIngredient(card))}\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","import { api } from '../../utils/Api';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { TBasketCard, TOrderData, TOrderArray, AppThunk } from '../../types/index';\r\n\r\nexport const GET_BURGER_CONSTRUCTOR_REQUEST: 'GET_BURGER_CONSTRUCTOR_REQUEST' = 'GET_BURGER_CONSTRUCTOR_REQUEST';\r\nexport const GET_BURGER_CONSTRUCTOR_SUCCESS: 'GET_BURGER_CONSTRUCTOR_SUCCESS' = 'GET_BURGER_CONSTRUCTOR_SUCCESS';\r\nexport const GET_BURGER_CONSTRUCTOR_FAILED: 'GET_BURGER_CONSTRUCTOR_FAILED' = 'GET_BURGER_CONSTRUCTOR_FAILED';\r\n\r\nexport const ADD_BURGER_CONSTRUCTOR_ITEM: 'ADD_BURGER_CONSTRUCTOR_ITEM' = 'ADD_BURGER_CONSTRUCTOR_ITEM';\r\nexport const ADD_BUN_FAILED: 'ADD_BUN_FAILED' = 'ADD_BUN_FAILED';\r\n\r\nexport const MOVE_BURGER_CONSTRUCTOR_ITEM: 'MOVE_BURGER_CONSTRUCTOR_ITEM' = 'MOVE_BURGER_CONSTRUCTOR_ITEM';\r\nexport const DELETE_BURGER_CONSTRUCTOR_ITEM: 'DELETE_BURGER_CONSTRUCTOR_ITEM' = 'DELETE_BURGER_CONSTRUCTOR_ITEM';\r\n\r\nexport const RESET_BURGER_CONSTRUCTOR: 'RESET_BURGER_CONSTRUCTOR' = 'RESET_BURGER_CONSTRUCTOR';\r\n\r\nexport interface IGetBurgerConstructorRequestAction {\r\n  readonly type: typeof GET_BURGER_CONSTRUCTOR_REQUEST;\r\n}\r\n\r\nexport interface IGetBurgerConstructorSuccessAction {\r\n  readonly type: typeof GET_BURGER_CONSTRUCTOR_SUCCESS;\r\n  readonly orderData: TOrderData;\r\n}\r\n\r\nexport interface IGetBurgerConstructorFailedAction {\r\n  readonly type: typeof GET_BURGER_CONSTRUCTOR_FAILED;\r\n}\r\n\r\nexport interface IAddBurgerConstructorItem {\r\n  readonly type: typeof ADD_BURGER_CONSTRUCTOR_ITEM;\r\n  burgerConstructorArray: TBasketCard;\r\n}\r\n\r\nexport interface IAddBunFailed {\r\n  readonly type: typeof ADD_BUN_FAILED;\r\n}\r\n\r\nexport interface IMoveBurgerConstructorItem {\r\n  readonly type: typeof MOVE_BURGER_CONSTRUCTOR_ITEM;\r\n  readonly dragIndex: number;\r\n  readonly hoverIndex: number;\r\n}\r\n\r\nexport interface IDeleteBurgerConstructorItem {\r\n  readonly type: typeof DELETE_BURGER_CONSTRUCTOR_ITEM;\r\n  readonly index: number;\r\n}\r\n\r\nexport interface IResetBurgerConstructor {\r\n  readonly type: typeof RESET_BURGER_CONSTRUCTOR;\r\n  burgerConstructorArray: Array<TBasketCard>;\r\n}\r\n\r\nexport type TBurgerConstructorActions = \r\n| IGetBurgerConstructorRequestAction \r\n| IGetBurgerConstructorSuccessAction \r\n| IGetBurgerConstructorFailedAction \r\n| IAddBurgerConstructorItem \r\n| IAddBunFailed \r\n| IMoveBurgerConstructorItem \r\n| IDeleteBurgerConstructorItem \r\n| IResetBurgerConstructor;\r\n\r\nexport function getConstructorData(array: TOrderArray) {\r\n  return function (dispatch: AppThunk) {\r\n    dispatch({\r\n      type: GET_BURGER_CONSTRUCTOR_REQUEST,\r\n    });\r\n    const accessToken = localStorage.getItem('accessToken')\r\n    api.sendOrder(array, accessToken!)\r\n      .then((data) => {\r\n        dispatch({\r\n          type: GET_BURGER_CONSTRUCTOR_SUCCESS,\r\n          orderData: data,\r\n        })\r\n      })\r\n      .catch(() => {\r\n        dispatch({\r\n          type: GET_BURGER_CONSTRUCTOR_FAILED,\r\n        });\r\n      })\r\n      .finally(() => {\r\n        dispatch({\r\n          type: RESET_BURGER_CONSTRUCTOR, \r\n          burgerConstructorArray: [],\r\n        })\r\n      });\r\n  }\r\n}\r\n\r\nexport function addConstructorItem(item: TBasketCard) {\r\n  if (item.type === 'bun') {\r\n    return ({\r\n      type: ADD_BUN_FAILED,\r\n    });\r\n  } else {\r\n    return ({\r\n      type: ADD_BURGER_CONSTRUCTOR_ITEM,\r\n      burgerConstructorArray: {...item, key: uuidv4()}\r\n    });\r\n  }\r\n}\r\n\r\nexport function moveConstructorItem(item: number, index: number) {\r\n  return({\r\n    type: MOVE_BURGER_CONSTRUCTOR_ITEM,\r\n    dragIndex: item,\r\n    hoverIndex: index\r\n  });\r\n}\r\n\r\nexport function deleteConstructorItem(index: number) {\r\n  return({\r\n    type: DELETE_BURGER_CONSTRUCTOR_ITEM, \r\n    index: index\r\n  })\r\n}\r\n\r\nexport function resetConstructorArray() {\r\n  return({\r\n    type: RESET_BURGER_CONSTRUCTOR, \r\n    burgerConstructorArray: [],\r\n  })\r\n}","import React from \"react\";\r\nimport BasketStyles from \"./BasketItem.module.css\";\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { useDrag, useDrop, DropTargetMonitor } from \"react-dnd\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\n\r\nimport { TBasketCard } from \"../../types\";\r\n\r\nimport {\r\n  moveConstructorItem,\r\n  deleteConstructorItem,\r\n} from \"../../services/actions/burgerConstructor\";\r\n\r\ninterface IBasketItem {\r\n  card: TBasketCard;\r\n  index: number;\r\n}\r\n\r\ntype FC<P> = React.FunctionComponent<P>;\r\n\r\nconst BasketItem: FC<IBasketItem> = (props: IBasketItem) => {\r\n  \r\n  const dispatch = useDispatch();\r\n  const ref = React.useRef<HTMLLIElement>(null);\r\n  const cardData: TBasketCard = props.card;\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"draggedIngr\",\r\n    hover(item: { index: number}, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex: number | undefined = item.index;\r\n      const hoverIndex = props.index;\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset: any = monitor.getClientOffset();\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      dispatch(moveConstructorItem(dragIndex, hoverIndex));\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  const [{ isDragging }, dragRef] = useDrag({\r\n    type: \"draggedIngr\",\r\n    item: () => {\r\n      return { card: props.card, index: props.index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n  const opacity = isDragging ? 0 : 1;\r\n\r\n  dragRef(dropTarget(ref));\r\n\r\n  function handleDeleteItem(index: number) {\r\n    dispatch(deleteConstructorItem(index));\r\n  }\r\n\r\n  return (\r\n    <li\r\n      className={`${BasketStyles.basketItem__listItem} mb-4 mr-2`}\r\n      ref={ref}\r\n      style={{ opacity: opacity }}\r\n    >\r\n      <div className={BasketStyles.iconBox}>\r\n        <DragIcon type=\"primary\" />\r\n      </div>\r\n      <ConstructorElement\r\n        text={cardData.name!}\r\n        price={cardData.price!}\r\n        thumbnail={cardData.image!}\r\n        handleClose={() => handleDeleteItem(props.index)}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default BasketItem;\r\n","import React from \"react\";\r\n\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport BurgerConstructorStyles from \"./BurgerConstructor.module.css\";\r\nimport {\r\n  ConstructorElement,\r\n  CurrencyIcon,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport BasketItem from \"../BasketItem/BasketItem\";\r\nimport { TBasketCard } from \"../../types\";\r\n\r\nimport {\r\n  getConstructorData,\r\n  addConstructorItem,\r\n} from \"../../services/actions/burgerConstructor\";\r\nimport { setSelectedBun } from \"../../services/actions/burgerIngredients\";\r\n\r\ninterface IBurgerConstructor {\r\n  openModal: () => void\r\n}\r\n\r\nconst BurgerConstructor: React.FC<IBurgerConstructor> = (props) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const [totalPrice, setTotalPrice] = React.useState<number>(0);\r\n  const [submitDisabled, setSubmitDisabled] = React.useState<boolean>(true);\r\n\r\n  const burgerConstructorArray = useSelector(\r\n    (state) => state.burgerConstructor.burgerConstructorArray\r\n  );\r\n\r\n  const selectedBun = useSelector(\r\n    (state) => state.burgerIngredients.selectedBun\r\n  );\r\n\r\n  const isUserAuth = useSelector(\r\n    (state) => state.currentSession.isCurrentUserAuth\r\n  );\r\n\r\n  const history = useHistory();\r\n  const cardsData = burgerConstructorArray;\r\n  const bunPrice: number = selectedBun.price!;\r\n\r\n  const [{ isHover }, dropTarget] = useDrop({\r\n    accept: \"ingr\",\r\n    drop(item: TBasketCard) {\r\n      if (item.type !== \"bun\") {\r\n        dispatch(addConstructorItem(item));\r\n      } else {\r\n        dispatch(setSelectedBun(item));\r\n      }\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  function counTotalPrice(array: Array<TBasketCard>) {\r\n    if (array.length === 0) {\r\n      return;\r\n    } else {\r\n      let filteredDigits: any = array.map((item: TBasketCard) => item.price);\r\n      filteredDigits.reduce((prev: number, curr: number) => {\r\n        return (filteredDigits = prev + curr);\r\n      });\r\n      return parseInt(filteredDigits);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (cardsData.length > 0) {\r\n      setTotalPrice(counTotalPrice(cardsData)! + bunPrice! * 2);\r\n    } else {\r\n      setTotalPrice(bunPrice! * 2);\r\n    }\r\n  }, [cardsData, bunPrice]);\r\n\r\n  React.useEffect(() => {\r\n    if (selectedBun._id === '0' && burgerConstructorArray.length === 0) {\r\n      setSubmitDisabled(true);\r\n    } else {\r\n      setSubmitDisabled(false);\r\n    }\r\n  }, [selectedBun]);\r\n\r\n  // const submitDisabledStyle = submitDisabled ? 0.3 : 1;\r\n\r\n  function getIngredientIds(array: Array<TBasketCard>) {\r\n    const bunId = selectedBun._id;\r\n    const newArray = array.map((item: TBasketCard) => item._id);\r\n    newArray.push(bunId);\r\n    return { ingredients: newArray };\r\n  }\r\n\r\n  function submitOrder() {\r\n    if (isUserAuth) {\r\n      dispatch(getConstructorData(getIngredientIds(burgerConstructorArray)));\r\n      props.openModal();\r\n    } else {\r\n      history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section\r\n      className={`${BurgerConstructorStyles.basket} mt-25 `}\r\n      ref={dropTarget}\r\n    >\r\n      <ul\r\n        className={\r\n          isHover\r\n            ? BurgerConstructorStyles.basket__list_modified\r\n            : BurgerConstructorStyles.basket__list\r\n        }\r\n      >\r\n        <li className={`${BurgerConstructorStyles.basket__listItem} mr-4`}>\r\n          <ConstructorElement\r\n            type=\"top\"\r\n            isLocked={true}\r\n            text={`${selectedBun.name} (верх)`}\r\n            price={bunPrice}\r\n            thumbnail={selectedBun.image!}\r\n          />\r\n        </li>\r\n        <span className={BurgerConstructorStyles.basket__listContainer}>\r\n          {burgerConstructorArray.length === 0\r\n            ? \"\"\r\n            : burgerConstructorArray.map((card: TBasketCard, index: number) => (\r\n                <BasketItem card={card} key={card.key} index={index} />\r\n              ))}\r\n        </span>\r\n        <li className={`${BurgerConstructorStyles.basket__listItem} mr-4`}>\r\n          <ConstructorElement\r\n            type=\"bottom\"\r\n            isLocked={true}\r\n            text={`${selectedBun.name} (низ)`}\r\n            price={bunPrice}\r\n            thumbnail={selectedBun.image!}\r\n          />\r\n        </li>\r\n      </ul>\r\n      <div className={`${BurgerConstructorStyles.basket__container} mt-10`}>\r\n        <div\r\n          className={`${BurgerConstructorStyles.basket__totalContainer} mr-10`}\r\n        >\r\n          <p className=\"text text_type_digits-medium mr-3\">{totalPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          onClick={submitOrder}\r\n          // disabled={submitDisabled}\r\n          // style={{ opacity: submitDisabledStyle }}\r\n        >\r\n          {isUserAuth ? \"Оформить заказ\" : \"Войти в аккаунт\"}\r\n        </Button>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import React from \"react\";\r\nimport ProfileStyles from \"./Profile.module.css\";\r\nimport AppStyles from '../App/App.module.css';\r\n\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { loginApi } from \"../../utils/LoginApi\";\r\n\r\nfunction Profile() {\r\n  const currentUser = useSelector((state) => state.currentSession.currentUser);\r\n  const [name, setName] = React.useState<string>('Загрузка...');\r\n  const [email, setEmail] = React.useState<string>('Загрузка...');\r\n  const [password, setPassword] = React.useState<string>(\"*****\");\r\n\r\n  const [nameDisabled, setNameDisabled] = React.useState<boolean>(true);\r\n  const [emailDisabled, setEmailDisabled] = React.useState<boolean>(true);\r\n  const [passwordDisabled, setPasswordDisabled] = React.useState<boolean>(true);\r\n\r\n  const nameInputRef = React.useRef<HTMLInputElement>(null);\r\n  const emailInputRef = React.useRef<HTMLInputElement>(null);\r\n  const passwordInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  React.useEffect(() => {\r\n    setInputData();\r\n  });\r\n\r\n  function onIconClick(input: any, \r\n    // HTMLInputElement не срабатывает, так и не смог разобраться почему\r\n    setState: (arg0: boolean) => void) {\r\n    console.log(input);\r\n    setTimeout(() => input.current.focus(), 0);\r\n    setState(false);\r\n  }\r\n\r\n  function handleSaveClick() {\r\n    const jwt = localStorage.getItem(\"accessToken\");\r\n    const data = {\r\n      name: name,\r\n      email: email,\r\n    };\r\n    if (jwt) {\r\n      loginApi\r\n      .setUserInfo(data, jwt)\r\n      .then(() => console.log(\"patch success\"))\r\n      .catch((err) => console.log(err));\r\n    } else {\r\n      return\r\n    }\r\n  }\r\n\r\n  function setInputData() {\r\n    if (currentUser === null || undefined) {\r\n      setName('Загрузка...');\r\n      setEmail('Загрузка...');\r\n    } else {\r\n      setName(currentUser.user.name);\r\n      setEmail(currentUser.user.email);\r\n    }\r\n    setNameDisabled(true);\r\n    setEmailDisabled(true);\r\n    setPasswordDisabled(true);\r\n  }\r\n\r\n  if (currentUser === null || undefined) {\r\n    return <div className={`${AppStyles.centeredComponent} text text_type_main-large`}>Загрузка...</div>\r\n  }\r\n\r\n  return (\r\n    <div className={ProfileStyles.profile}>\r\n      <ul className={ProfileStyles.profileList}>\r\n        <li className={`${ProfileStyles.profileListItem} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            onChange={(e) => setName(e.target.value)}\r\n            icon={\"EditIcon\"}\r\n            value={name}\r\n            name={\"Name\"}\r\n            error={false}\r\n            ref={nameInputRef}\r\n            onIconClick={() => onIconClick(nameInputRef, setNameDisabled)}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n            disabled={nameDisabled}\r\n          />\r\n        </li>\r\n        <li className={`${ProfileStyles.profileListItem} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Логин\"}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            icon={\"EditIcon\"}\r\n            value={email}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={emailInputRef}\r\n            onIconClick={() => onIconClick(emailInputRef, setEmailDisabled)}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n            disabled={emailDisabled}\r\n          />\r\n        </li>\r\n        <li className={`${ProfileStyles.profileListItem} mb-6`}>\r\n          <Input\r\n            type={\"password\"}\r\n            placeholder={\"Пароль\"}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            icon={\"EditIcon\"}\r\n            value={password}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={passwordInputRef}\r\n            onIconClick={() =>\r\n              onIconClick(passwordInputRef, setPasswordDisabled)\r\n            }\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n            disabled={passwordDisabled}\r\n          />\r\n        </li>\r\n      </ul>\r\n      <div className={ProfileStyles.buttonBox}>\r\n        <Button type=\"secondary\" size=\"medium\" onClick={() => setInputData()}>\r\n          Отмена\r\n        </Button>\r\n        <Button type=\"primary\" size=\"medium\" onClick={() => handleSaveClick()}>\r\n          Сохранить\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import { TBasketCard, TCardData } from \"../types\";\r\nimport { isToday, format, isYesterday } from 'date-fns';\r\n\r\nexport const getIngr = (array: TCardData | null, burgerIngredientsArray: Array<TBasketCard>) => {\r\n  let Ingr: Array<TBasketCard> = [];\r\n  array!.ingredients.map((id: string) => {\r\n    return burgerIngredientsArray.forEach((item: TBasketCard) => {\r\n      if (item._id === id) {\r\n        Ingr.push(item!);\r\n      }\r\n    });\r\n  });\r\n  return Ingr;\r\n};\r\n\r\nexport const getTotalPrice = (array: Array<TBasketCard>) => {\r\n  let totalSum = 0;\r\n  let ingrPrices: Array<number> = [];\r\n  array.forEach((item) => ingrPrices.push(item.price!));\r\n  for (let i = 0; i < ingrPrices.length; i++) {\r\n    totalSum += ingrPrices[i];\r\n  }\r\n  return totalSum;\r\n};\r\n\r\nexport const getCurrentDate = (date: Date) => {\r\n  if (isToday(date)) {\r\n    return 'Сегодня'\r\n  } else if (isYesterday(date)) {\r\n    return 'Вчера'\r\n  } else {\r\n    return format((date), 'MM.dd.yyyy');\r\n  }\r\n};\r\n\r\nexport function filterOrderFeed(array: Array<TCardData>, id: string) {\r\n  let filteredArray = array.filter((obj: { _id: string }) => obj._id === id);\r\n  return filteredArray[0];\r\n}\r\n\r\nexport const getNumberOfIngrs = (array: TCardData) => {\r\n  const idArray: any = {};\r\n  array &&\r\n  array.ingredients.forEach((id: string) => {\r\n    if (!idArray[id]) idArray[id] = 0;\r\n      idArray[id]++;\r\n    });\r\n  return idArray;\r\n};\r\n\r\n","import React from 'react';\r\nimport OrderStyles from './OrderHistory.module.css';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { TBasketCard, TLocationState, TCardData } from '../../types';\r\n\r\nimport { format } from 'date-fns';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nimport { getIngr, getTotalPrice, getCurrentDate } from '../../utils/functions';\r\n\r\ninterface IOrderItem {\r\n  card: TCardData;\r\n  feed: boolean;\r\n  isAuth: boolean;\r\n  openModal?: () => void;\r\n}\r\n\r\nconst OrderItem: React.FC<IOrderItem> = (props) => {\r\n\r\n  const [ style, setStyle ] = React.useState<string>('red');\r\n  const [ status, setStatus ] = React.useState<string>('Выполнен');\r\n  const [ isAuthPath, setAuthPath ] = React.useState<string>('/account/order-history/');\r\n  const location = useLocation<TLocationState>();\r\n\r\n  React.useEffect(() => {\r\n    if (location.pathname === '/feed') {\r\n      setAuthPath('/feed/')\r\n    } else {\r\n      setAuthPath('/account/order-history/')\r\n    }\r\n  }, [location]);\r\n\r\n  const cardData = props.card;\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n\r\n  const checkOrderStatus = () => {\r\n    if (cardData.status === 'done') {\r\n      setStyle('#00CCCC')\r\n      setStatus('Выполнен');\r\n    } else if (cardData.status === 'pending') {\r\n      setStyle('ligntblue')\r\n      setStatus('В обработке');\r\n    } else {\r\n      setStyle('white');\r\n      setStatus('Создан');\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    checkOrderStatus();\r\n  }, [])\r\n\r\n  var time = format(new Date(cardData.createdAt), 'hh:mm');\r\n  const date = new Date(cardData.createdAt);\r\n\r\n  const currentDay = getCurrentDate(date);\r\n  const ingrArray = getIngr(cardData, burgerIngredientsArray);\r\n  const totalPrice = getTotalPrice(ingrArray);\r\n\r\n  return (\r\n    <li className={`${OrderStyles.listItem} mb-6`}>\r\n      <Link\r\n        className={OrderStyles.link}\r\n        onClick={props.openModal}\r\n        to={{\r\n          pathname: `${isAuthPath}${cardData._id}`,\r\n          state: { background: location },\r\n        }}\r\n      >\r\n        <div className={`${OrderStyles.textBox} mb-6`}>\r\n          <p className='text text_type_digits-default'>{`#0${cardData.number}`}</p>\r\n          <p className='text text_type_main-default text_color_inactive'>{`${currentDay}, в ${time} i-GMT+3`}</p>\r\n        </div>\r\n        <h2 className='text text_type_main-medium mb-2'>{cardData.name}</h2>\r\n        <p className={`${props.feed ? OrderStyles.visible : OrderStyles.hidden } text text_type_main-small mb-7`} style={{ color: style }}>{status}</p>\r\n        <div className={OrderStyles.dataBox}>\r\n          <ul className={OrderStyles.ingrList}>\r\n            {ingrArray.length > 5 ? (\r\n              <li className={OrderStyles.ingItem} key={5}>\r\n                <img src={ingrArray[5].image} alt={ingrArray[5].name} className={OrderStyles.img} />\r\n                <p className={`${OrderStyles.ingDigit} text text_type_digits-default`}>{`+${ingrArray.length - 5}`}</p>\r\n              </li>) : null\r\n            }\r\n            {ingrArray && ingrArray.slice(0,4).map((card: TBasketCard, index: number) => (\r\n                <li className={OrderStyles.ingItem} key={index}>\r\n                  <img src={card.image} alt={cardData.name} className={OrderStyles.img} />\r\n                </li>\r\n            ))}\r\n          </ul>\r\n          <div className={OrderStyles.textContainer}>\r\n            <p className='text text_type_digits-default mr-2'>{totalPrice}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default OrderItem;","export const WS_AUTH_CONNECTION_START: \"WS_AUTH_CONNECTION_START\" = \"WS_AUTH_CONNECTION_START\";\r\nexport const WS_AUTH_CONNECTION_SUCCESS: \"WS_AUTH_CONNECTION_SUCCESS\" =\r\n  \"WS_AUTH_CONNECTION_SUCCESS\";\r\nexport const WS_AUTH_CONNECTION_ERROR: \"WS_AUTH_CONNECTION_ERROR\" = \"WS_AUTH_CONNECTION_ERROR\";\r\nexport const WS_AUTH_CONNECTION_CLOSED: \"WS_AUTH_CONNECTION_CLOSED\" =\r\n  \"WS_AUTH_CONNECTION_CLOSED\";\r\nexport const WS_AUTH_GET_MESSAGE: \"WS_AUTH_GET_MESSAGE\" = \"WS_AUTH_GET_MESSAGE\";\r\nexport const WS_AUTH_SEND_MESSAGE: \"WS_AUTH_SEND_MESSAGE\" = \"WS_AUTH_SEND_MESSAGE\";\r\n\r\nexport interface WsAuthConnectionStartAction {\r\n  readonly type: typeof WS_AUTH_CONNECTION_START;\r\n}\r\n\r\nexport interface WsAuthConnectionSuccessAction {\r\n  readonly type: typeof WS_AUTH_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface WsAuthConnectionErrorAction {\r\n  readonly type: typeof WS_AUTH_CONNECTION_ERROR;\r\n  readonly payload: any;\r\n}\r\n\r\nexport interface WsAuthConnectionClosedAction {\r\n  readonly type: typeof WS_AUTH_CONNECTION_CLOSED;\r\n}\r\n\r\nexport interface WsAuthConnectionGetMessageAction {\r\n  readonly type: typeof WS_AUTH_GET_MESSAGE;\r\n  readonly payload: any;\r\n}\r\n\r\nexport interface WsAuthConnectionSendMessageAction {\r\n  readonly type: typeof WS_AUTH_SEND_MESSAGE;\r\n}\r\n\r\nexport type TWsAuthActions =\r\n  | WsAuthConnectionStartAction\r\n  | WsAuthConnectionSuccessAction\r\n  | WsAuthConnectionErrorAction\r\n  | WsAuthConnectionClosedAction\r\n  | WsAuthConnectionGetMessageAction\r\n  | WsAuthConnectionSendMessageAction\r\n\r\n\r\n  export const wsAuthConnectionStart = () => ({\r\n    type: WS_AUTH_CONNECTION_START,\r\n  });\r\n\r\n  export const wsAuthConnectionClose = () => ({\r\n    type: WS_AUTH_CONNECTION_CLOSED,\r\n  })","import React from 'react';\r\nimport OrderStyles from './OrderHistory.module.css';\r\nimport AppStyles from '../App/App.module.css';\r\n\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport OrderItem from './OrderItem';\r\n\r\nimport { TCardData } from '../../types';\r\nimport { wsAuthConnectionClose, wsAuthConnectionStart } from '../../services/actions/wsAuthActions';\r\n\r\ninterface IOrderHistory {\r\n  openModal: () => void;\r\n}\r\n\r\nconst OrderHistory: React.FC<IOrderHistory> = (props) => {\r\n\r\n  const dispatch = useDispatch();\r\n  React.useEffect((): () => void => {\r\n    dispatch(wsAuthConnectionStart());\r\n    return () => dispatch(wsAuthConnectionClose());\r\n  }, [dispatch])\r\n\r\n  const orderFeed = useSelector(\r\n    (state) => state.userOrderFeed\r\n  );\r\n\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n  \r\n  if (orderFeed.isPageLoading === true || burgerIngredientsArray.length === 0) {\r\n    return <div className={`${AppStyles.centeredComponent} text text_type_main-large`}>Загрузка...</div>\r\n  }\r\n\r\n  return (\r\n    <div className={OrderStyles.orderHistory}>\r\n      <ul className={OrderStyles.profileList}>\r\n        {orderFeed.orderFeedData.orders.map((card: TCardData, index: number) => (\r\n          <OrderItem card={card} openModal={props.openModal} feed={true} key={index} isAuth={true} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderHistory;","export const WS_CONNECTION_START: \"WS_CONNECTION_START\" = \"WS_CONNECTION_START\";\r\nexport const WS_CONNECTION_SUCCESS: \"WS_CONNECTION_SUCCESS\" =\r\n  \"WS_CONNECTION_SUCCESS\";\r\nexport const WS_CONNECTION_ERROR: \"WS_CONNECTION_ERROR\" = \"WS_CONNECTION_ERROR\";\r\nexport const WS_CONNECTION_CLOSED: \"WS_CONNECTION_CLOSED\" =\r\n  \"WS_CONNECTION_CLOSED\";\r\nexport const WS_GET_MESSAGE: \"WS_GET_MESSAGE\" = \"WS_GET_MESSAGE\";\r\nexport const WS_SEND_MESSAGE: \"WS_SEND_MESSAGE\" = \"WS_SEND_MESSAGE\";\r\n\r\nexport interface WsConnectionStartAction {\r\n  readonly type: typeof WS_CONNECTION_START;\r\n}\r\n\r\nexport interface WsConnectionSuccessAction {\r\n  readonly type: typeof WS_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface WsConnectionErrorAction {\r\n  readonly type: typeof WS_CONNECTION_ERROR;\r\n  readonly payload: any;\r\n}\r\n\r\nexport interface WsConnectionClosedAction {\r\n  readonly type: typeof WS_CONNECTION_CLOSED;\r\n}\r\n\r\nexport interface WsConnectionGetMessageAction {\r\n  readonly type: typeof WS_GET_MESSAGE;\r\n  readonly payload: any;\r\n}\r\n\r\nexport interface WsConnectionSendMessageAction {\r\n  readonly type: typeof WS_SEND_MESSAGE;\r\n}\r\n\r\nexport type TWsActions =\r\n  | WsConnectionStartAction\r\n  | WsConnectionSuccessAction\r\n  | WsConnectionErrorAction\r\n  | WsConnectionClosedAction\r\n  | WsConnectionGetMessageAction\r\n  | WsConnectionSendMessageAction\r\n\r\n\r\n  export const wsConnectionStart = () => ({\r\n    type: WS_CONNECTION_START,\r\n  });\r\n\r\n  export const wsConnectionClose = () => ({\r\n    type: WS_CONNECTION_CLOSED,\r\n  })","import React from \"react\";\r\nimport AccountStyles from \"./Account.module.css\";\r\n\r\nimport { useDispatch } from \"../../services/hooks\";\r\nimport {\r\n  Route,\r\n  NavLink,\r\n  useRouteMatch,\r\n  Redirect,\r\n  Switch,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport Profile from \"../../components/Profile/Profile\";\r\nimport OrderHistory from \"../../components/OrderHistory/OrderHistory\";\r\n\r\nimport { wsConnectionClose, wsConnectionStart } from \"../../services/actions/wsActions\";\r\nimport { logoutUser } from \"../../services/actions/currentSession\";\r\n\r\nimport { wsAuthConnectionClose } from '../../services/actions/wsAuthActions';\r\n\r\ninterface IAcoount {\r\n  openModal: () => void;\r\n}\r\n\r\nconst Account: React.FC<IAcoount> = (props) => {\r\n  const history = useHistory();\r\n  const { path, url } = useRouteMatch();\r\n\r\n  const dispatch = useDispatch();\r\n  React.useEffect((): () => void => {\r\n    dispatch(wsConnectionStart());\r\n    return () => dispatch(wsConnectionClose());\r\n  }, [dispatch]);\r\n\r\n  function handleSignOut() {\r\n    dispatch(wsAuthConnectionClose());\r\n    const refreshJwt: string | null = localStorage.getItem(\"refreshToken\");\r\n    dispatch(logoutUser(refreshJwt!, () => history.push(\"/login\")));\r\n  }\r\n\r\n  return (\r\n    <div className={AccountStyles.account}>\r\n      <nav className={AccountStyles.nav}>\r\n        <ul className={`${AccountStyles.list} mb-20`}>\r\n          <li className={AccountStyles.listItem}>\r\n            <NavLink\r\n              to={`${url}/profile`}\r\n              className={`${AccountStyles.link} text text_type_main-medium text_color_inactive`}\r\n              activeClassName={AccountStyles.link_active}\r\n            >\r\n              Профиль\r\n            </NavLink>\r\n          </li>\r\n          <li className={AccountStyles.listItem}>\r\n            <NavLink\r\n              to={`${url}/order-history`}\r\n              className={`${AccountStyles.link} text text_type_main-medium text_color_inactive`}\r\n              activeClassName={AccountStyles.link_active}\r\n            >\r\n              История заказов\r\n            </NavLink>\r\n          </li>\r\n          <li className={AccountStyles.listItem}>\r\n            <button\r\n              type=\"button\"\r\n              className={`${AccountStyles.button} text text_type_main-medium text_color_inactive`}\r\n              onClick={handleSignOut}\r\n            >\r\n              Выход\r\n            </button>\r\n          </li>\r\n        </ul>\r\n        <p className={`${AccountStyles.text} text text_type_main-default`}>\r\n          В этом разделе вы можете изменить свои персональные данные\r\n        </p>\r\n      </nav>\r\n      <div className={AccountStyles.contentBox}>\r\n        <Switch>\r\n          <Route path={`${path}/profile`}>\r\n            <Profile />\r\n          </Route>\r\n          <Route path={`${path}/order-history`}>\r\n            <OrderHistory \r\n              openModal={props.openModal}\r\n            />\r\n          </Route>\r\n          <Redirect to={`${url}/profile`} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Account;\r\n","import React from \"react\";\r\nimport AuthStyles from \"./Auth.module.css\";\r\n\r\nimport {\r\n  Input,\r\n  Button,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\nimport { loginUser } from \"../../services/actions/currentSession\";\r\n\r\nfunction Login() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n\r\n  const inputRef = React.useRef<HTMLInputElement>(null);\r\n  \r\n  const onIconClick = () => {\r\n    console.log('click');\r\n    // setTimeout(() => inputRef.current.focus(), 0);\r\n    // alert(\"Icon Click Callback\");\r\n  };\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  function handleSubmit(evt: React.FormEvent<HTMLFormElement>) {\r\n    evt.preventDefault();\r\n    const data = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n    dispatch(loginUser(data, () => history.push(\"/\")));\r\n  }\r\n\r\n  return (\r\n    <div className={AuthStyles.login}>\r\n      <h2 className={AuthStyles.heading}>Вход</h2>\r\n      <form\r\n        className={`${AuthStyles.form} mb-20`}\r\n        onSubmit={(e) => handleSubmit(e)}\r\n      >\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Email\"}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={inputRef}\r\n            onIconClick={onIconClick}\r\n            errorText={\"Ошибка\"}\r\n          />\r\n        </fieldset>\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <PasswordInput onChange={onChange} value={password} name={\"Пароль\"} />\r\n        </fieldset>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Войти\r\n        </Button>\r\n      </form>\r\n      <div className={AuthStyles.textContainer}>\r\n        <p\r\n          className={`${AuthStyles.text} text text_type_main-default text_color_inactive mb-4`}\r\n        >\r\n          Вы — новый пользователь?{\" \"}\r\n          <Link to={\"/register\"} className={AuthStyles.link}>\r\n            Зарегистрироваться\r\n          </Link>\r\n        </p>\r\n        <p\r\n          className={`${AuthStyles.text} text text_type_main-default text_color_inactive`}\r\n        >\r\n          Забыли пароль?{\" \"}\r\n          <Link to={\"/forgot-password\"} className={AuthStyles.link}>\r\n            Восстановить пароль\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport AuthStyles from \"./Auth.module.css\";\r\n\r\nimport {\r\n  Input,\r\n  Button,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\nimport { registerUser } from \"../../services/actions/currentSession\";\r\n\r\nfunction Register() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [name, setName] = React.useState<string>(\"\");\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n\r\n  const nameInputRef = React.useRef<HTMLInputElement>(null);\r\n  const mailInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = (input: any) => {\r\n    console.log(input);\r\n    // setTimeout(() => input.current.focus(), 0);\r\n    // alert(\"Icon Click Callback\");\r\n  };\r\n\r\n  const onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  function handleSubmit(evt: React.FormEvent<HTMLFormElement>) {\r\n    evt.preventDefault();\r\n    const data = {\r\n      name: name,\r\n      email: email,\r\n      password: password,\r\n    };\r\n    dispatch(registerUser(data, () => history.push(\"/login\")));\r\n  }\r\n\r\n  return (\r\n    <div className={AuthStyles.login}>\r\n      <h2 className={AuthStyles.heading}>Регистрация</h2>\r\n      <form\r\n        className={`${AuthStyles.form} mb-20`}\r\n        onSubmit={(e) => handleSubmit(e)}\r\n      >\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            onChange={(e) => setName(e.target.value)}\r\n            value={name}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={nameInputRef}\r\n            onIconClick={() => onIconClick(nameInputRef)}\r\n            errorText={\"Ошибка\"}\r\n          />\r\n        </fieldset>\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Email\"}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={mailInputRef}\r\n            onIconClick={() => onIconClick(mailInputRef)}\r\n            errorText={\"Ошибка\"}\r\n          />\r\n        </fieldset>\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <PasswordInput onChange={onChange} value={password} name={\"Пароль\"} />\r\n        </fieldset>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Зарегистрироваться\r\n        </Button>\r\n      </form>\r\n      <div className={AuthStyles.textContainer}>\r\n        <p\r\n          className={`${AuthStyles.text} text text_type_main-default text_color_inactive mb-4`}\r\n        >\r\n          Уже зарегистрированы?{\" \"}\r\n          <Link to={\"/login\"} className={AuthStyles.link}>\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from \"react\";\r\nimport AuthStyles from \"./Auth.module.css\";\r\n\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\nimport { forgotPassword } from \"../../services/actions/currentSession\";\r\n\r\nfunction ForgotPassword() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const mailInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = (input: any) => {\r\n    console.log(input);\r\n    // setTimeout(() => input.current.focus(), 0);\r\n    // alert(\"Icon Click Callback\");\r\n  };\r\n\r\n  function handleSubmit(evt: React.FormEvent<HTMLFormElement>) {\r\n    evt.preventDefault();\r\n    const data = {\r\n      email: email,\r\n    };\r\n    dispatch(forgotPassword(data, () => history.push(\"/reset-password\")));\r\n  }\r\n\r\n  return (\r\n    <div className={AuthStyles.login}>\r\n      <h2 className={AuthStyles.heading}>Восстановление пароля</h2>\r\n      <form\r\n        className={`${AuthStyles.form} mb-20`}\r\n        onSubmit={(e) => handleSubmit(e)}\r\n      >\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Email\"}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={mailInputRef}\r\n            onIconClick={() => onIconClick(mailInputRef)}\r\n            errorText={\"Ошибка\"}\r\n          />\r\n        </fieldset>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Восстановить\r\n        </Button>\r\n      </form>\r\n      <div className={AuthStyles.textContainer}>\r\n        <p\r\n          className={`${AuthStyles.text} text text_type_main-default text_color_inactive mb-4`}\r\n        >\r\n          Вспомнили пароль?{\" \"}\r\n          <Link to={\"/login\"} className={AuthStyles.link}>\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ForgotPassword;\r\n","import React from \"react\";\r\nimport AuthStyles from \"./Auth.module.css\";\r\n\r\nimport {\r\n  Input,\r\n  Button,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\nimport { recoverPassword } from \"../../services/actions/currentSession\";\r\n\r\nfunction RecoverPassword() {\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n  const [token, setToken] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n  const passwordInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = (input: any) => {\r\n    console.log(input)\r\n    // setTimeout(() => input.current.focus(), 0);\r\n    // alert(\"Icon Click Callback\");\r\n  };\r\n\r\n  const onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  function handleSubmit(evt: React.FormEvent<HTMLFormElement>) {\r\n    evt.preventDefault();\r\n    const data = {\r\n      password: password,\r\n      token: token,\r\n    };\r\n    dispatch(recoverPassword(data, () => history.push(\"/login\")));\r\n  }\r\n\r\n  return (\r\n    <div className={AuthStyles.login}>\r\n      <h2 className={AuthStyles.heading}>Восстановление пароля</h2>\r\n      <form\r\n        className={`${AuthStyles.form} mb-20`}\r\n        onSubmit={(e) => handleSubmit(e)}\r\n      >\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <PasswordInput\r\n            onChange={onChange}\r\n            value={password}\r\n            name={\"Введите новый пароль\"}\r\n          />\r\n        </fieldset>\r\n        <fieldset className={`${AuthStyles.fieldset} mb-6`}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Введите код из письма\"}\r\n            onChange={(e) => setToken(e.target.value)}\r\n            value={token}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={passwordInputRef}\r\n            onIconClick={() => onIconClick(passwordInputRef)}\r\n            errorText={\"Ошибка\"}\r\n          />\r\n        </fieldset>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Сохранить\r\n        </Button>\r\n      </form>\r\n      <div className={AuthStyles.textContainer}>\r\n        <p\r\n          className={`${AuthStyles.text} text text_type_main-default text_color_inactive mb-4`}\r\n        >\r\n          Вспомнили пароль?{\" \"}\r\n          <Link to={\"/login\"} className={AuthStyles.link}>\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RecoverPassword;\r\n","import React from \"react\";\r\nimport IngStyles from \"./IngredientDetailsPage.module.css\";\r\n\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { DEFAULT_ING } from \"../../utils/constants\";\r\nimport { TBasketCard } from '../../types'\r\n\r\nfunction IngredientDetailsPage() {\r\n  const [cardData, setCardData] = React.useState<TBasketCard>(DEFAULT_ING);\r\n\r\n  const { id } = useParams<{ id?: string }>();\r\n\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    let ingredient: any;\r\n    burgerIngredientsArray.forEach((ing: TBasketCard) => {\r\n      if (ing._id === id) {\r\n        ingredient = ing;\r\n      }\r\n    });\r\n    setCardData(ingredient);\r\n  }, [burgerIngredientsArray, id]);\r\n\r\n  return (\r\n    <div className={`${IngStyles.contentBox}`}>\r\n      <h2\r\n        className={`${IngStyles.title_modified} text text_type_main-large pl-10`}\r\n      >\r\n        Детали ингредиента\r\n      </h2>\r\n      <div className={`${IngStyles.imgContainer} mb-4`}>\r\n        <img\r\n          src={cardData && cardData.image}\r\n          alt=\"tick animation\"\r\n          className={IngStyles.ingImage}\r\n        />\r\n      </div>\r\n      <p className=\"text text_type_main-medium mb-8\">\r\n        {cardData && cardData.name}\r\n      </p>\r\n      <ul className={IngStyles.statsList}>\r\n        <li className={IngStyles.statsListItem}>\r\n          <p\r\n            className={`${IngStyles.category} text text_type_main-default text_color_inactive`}\r\n          >\r\n            Калории,ккал\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {cardData && cardData.calories}\r\n          </p>\r\n        </li>\r\n        <li className={IngStyles.statsListItem}>\r\n          <p\r\n            className={`${IngStyles.category} text text_type_main-default text_color_inactive`}\r\n          >\r\n            Белки, г\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {cardData && cardData.carbohydrates}\r\n          </p>\r\n        </li>\r\n        <li className={IngStyles.statsListItem}>\r\n          <p\r\n            className={`${IngStyles.category} text text_type_main-default text_color_inactive`}\r\n          >\r\n            Жиры, г\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {cardData && cardData.fat}\r\n          </p>\r\n        </li>\r\n        <li className={IngStyles.statsListItem}>\r\n          <p\r\n            className={`${IngStyles.category} text text_type_main-default text_color_inactive`}\r\n          >\r\n            Углеводы, г\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {cardData && cardData.proteins}\r\n          </p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IngredientDetailsPage;\r\n","import React from 'react';\r\nimport FeedStyles from './OrderFeed.module.css';\r\nimport AppStyles from '../../components/App/App.module.css';\r\n\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport OrderItem from '../../components/OrderHistory/OrderItem';\r\nimport { wsConnectionStart, wsConnectionClose } from \"../../services/actions/wsActions\";\r\nimport { TCardData } from '../../types';\r\n\r\ninterface IOrderFeed {\r\n  openModal?: () => void;\r\n}\r\n\r\nconst OrderFeed = (props: IOrderFeed) => {\r\n\r\n  const dispatch = useDispatch();\r\n  React.useEffect((): () => void => {\r\n    dispatch(wsConnectionStart());\r\n    return () => dispatch(wsConnectionClose());\r\n  }, [dispatch]);\r\n\r\n  let orderFeedArray;\r\n  let finishedOrders;\r\n  let currentOrders;\r\n\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n\r\n  const orderFeed = useSelector(\r\n    (state) => state.orderFeed\r\n  );\r\n\r\n  if (burgerIngredientsArray.length === 0 || orderFeed.wsConnected === false || orderFeed.isPageLoading === true) {\r\n    return <div className={`${AppStyles.centeredComponent} text text_type_main-large`}>Загрузка...</div>\r\n  }\r\n\r\n  orderFeedArray = orderFeed.orderFeedData.orders;\r\n  finishedOrders = orderFeedArray.filter((obj: { status: string; }) => obj.status === 'done').slice(0,5);\r\n  currentOrders = orderFeedArray.filter((obj: { status: string; }) => obj.status !== 'done').slice(0,5);\r\n\r\n  return (\r\n    <div className={FeedStyles.orderFeed}>\r\n      <h1 className='text text_type_main-large mt-10 mb-5'>Лента заказов</h1>\r\n      <div className={FeedStyles.contentBox}>\r\n        <ul className={FeedStyles.list}>\r\n          {orderFeedArray.map((card: TCardData) =>\r\n            <OrderItem card={card} feed={false} key={card._id} openModal={props.openModal} isAuth={false} />\r\n          )}\r\n        </ul>\r\n        <div className={FeedStyles.ordersData}>\r\n          <div className={`${FeedStyles.orderStatusBox} mb-15`}>\r\n            <p className='text text_type_main-medium'>\r\n              Готовы:\r\n            </p>\r\n            <p className='text text_type_main-medium'>\r\n              В работе:\r\n            </p>\r\n            <ul className={FeedStyles.orderList}>\r\n              {finishedOrders && finishedOrders.map((card: TCardData, index: number) => ( \r\n                <li className='text text_type_digits-default mb-2' key={index}>0{card.number}</li>\r\n              ))}\r\n            </ul>\r\n            <ul className={FeedStyles.orderListReady}>\r\n              {currentOrders.length === 0 ? \r\n              <li className='text text_type_main-small'>Все текущие заказы готовы!</li>\r\n              : currentOrders && currentOrders.map((card: TCardData, index: number) => ( \r\n                <li className='text text_type_digits-default mb-2' key={index}>0{card.number}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          <div className={`${FeedStyles.numBox} mb-15`}>\r\n            <p className='text text_type_main-medium'>Выполнено за все время:</p>\r\n            <p className={`${FeedStyles.number} text text_type_digits-large`}>{orderFeed.orderFeedData.total}</p>\r\n          </div>\r\n          <div className={FeedStyles.numBox}>\r\n            <p className='text text_type_main-medium'>Выполнено за сегодня:</p>\r\n            <p className={`${FeedStyles.number} text text_type_digits-large`}>{orderFeed.orderFeedData.totalToday}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderFeed;","export default __webpack_public_path__ + \"static/media/astronaut.95c8b098.png\";","import NotFoundStyles from \"./NotFound.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport astronaut from \"../../images/astronaut.png\";\r\nimport loading from \"../../images/loading.svg\";\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <div className={NotFoundStyles.notFound}>\r\n      <h1 className={NotFoundStyles.title}>404</h1>\r\n      <p className={NotFoundStyles.text}>Страница не найдена :(</p>\r\n      <Link to=\"/\" className={NotFoundStyles.link}>\r\n        На главную\r\n      </Link>\r\n      <img src={astronaut} alt=\"astronaut\" className={NotFoundStyles.img} />\r\n      <img src={loading} alt=\"loading\" className={NotFoundStyles.imgLoading} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport ModalStyles from \"./Modal.module.css\";\r\nimport AppStyles from '../App/App.module.css';\r\n\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { getIngr, getTotalPrice, getCurrentDate, filterOrderFeed, getNumberOfIngrs } from '../../utils/functions';\r\nimport { format } from 'date-fns';\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { TBasketCard, TCardData } from '../../types';\r\nimport NotFound from \"../../pages/NotFound/NotFound\";\r\n\r\ninterface TOrderData {\r\n  isModal?: boolean;\r\n}\r\n\r\nconst OrderData = (props: TOrderData) => {\r\n\r\n  const { id } = useParams<{ id?: string }>();\r\n  const [ style, setStyle ] = React.useState<string>('red');\r\n  const [ status, setStatus ] = React.useState<string>('Выполнен');\r\n  const location = useLocation();\r\n\r\n  const isUserAuth = useSelector(\r\n    (state) => state.currentSession.isCurrentUserAuth\r\n  );\r\n\r\n  const orderFeed = useSelector(\r\n    (state) => state.orderFeed\r\n  );\r\n\r\n  const userOrderFeed = useSelector(\r\n    (state) => state.userOrderFeed\r\n  );\r\n\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n\r\n  let cardData: TCardData | null = null;\r\n\r\n  let time;\r\n  let date;\r\n  let currentDay;\r\n  let ingrArray: TBasketCard[];\r\n  let totalPrice;\r\n\r\n  React.useEffect(() => {\r\n    setOrderStatus(cardData);\r\n  }, [cardData]);\r\n\r\n  function setOrderStatus(card: TCardData | null) {\r\n    if (!card) {\r\n      return\r\n    } else if (card.status === 'done') {\r\n      setStyle('#00CCCC')\r\n      setStatus('Выполнен');\r\n    } else if (card.status === 'pending') {\r\n      setStyle('ligntblue')\r\n      setStatus('В обработке');\r\n    } else {\r\n      setStyle('white');\r\n      setStatus('Создан');\r\n    }\r\n  };\r\n  \r\n  if (orderFeed.isPageLoading === true \r\n    || burgerIngredientsArray.length === 0\r\n    || (!isUserAuth && !orderFeed.orderFeedData) \r\n    || (isUserAuth && !userOrderFeed.orderFeedData)) {\r\n    return <div className={`${AppStyles.centeredComponent} text text_type_main-large`}>Загрузка...</div>\r\n  }\r\n\r\n  if ((!isUserAuth && orderFeed && orderFeed.orderFeedData) \r\n  || (isUserAuth && userOrderFeed && userOrderFeed.orderFeedData)) {\r\n    cardData = location.pathname === `/feed/${id}`\r\n    ? filterOrderFeed(orderFeed.orderFeedData.orders, id!) \r\n    : filterOrderFeed(userOrderFeed.orderFeedData.orders, id!);\r\n  }\r\n\r\n  if (cardData === undefined) {\r\n    return <NotFound />\r\n  }\r\n\r\n  time = format(new Date(cardData!.createdAt), 'hh:mm');\r\n  date = new Date(cardData!.createdAt);\r\n  currentDay = getCurrentDate(date);\r\n  \r\n  ingrArray = getIngr(cardData!, burgerIngredientsArray);\r\n  totalPrice = getTotalPrice(ingrArray);\r\n\r\n  const uniqueArray = ingrArray.filter((item: TBasketCard, pos: number) => {\r\n    return ingrArray.indexOf(item) === pos;\r\n  });\r\n\r\n  const numberOfIngrs: any = getNumberOfIngrs(cardData!);\r\n\r\n  return (\r\n    <div className={`${props.isModal ? `${ModalStyles.orderBox} p-10` : ModalStyles.pageBox}`}>\r\n      <p className=\"text text_type_digits-default mb-10 mt-5\">#0{cardData!.number || 'Загрузка...'}</p>\r\n      <h2 className=\"text text_type_main-medium mb-2\">{cardData!.name  || 'Загрузка...'}</h2>\r\n      <p className={`${ModalStyles.statusText} text text_type_main-default mb-15`} style={{ color: style }}>{status}</p>\r\n      <p className=\"text text_type_main-medium mb-8\">Cостав</p>\r\n      <ul className={`${ModalStyles.list}`}>\r\n        {uniqueArray && uniqueArray.map((card, index) => (\r\n          <li className={`${ModalStyles.listItem} mb-4`} key={index}>\r\n            <div className={`${ModalStyles.imgBox}`}>\r\n              <img src={card.image} alt={card.name} className={`${ModalStyles.img} mr-4`} />\r\n              <p className={`${ModalStyles.ingrText} text text_type_main-default`}>{card.name}</p>\r\n            </div>\r\n            <div className={`${ModalStyles.priceBox}`}>\r\n              <p className={`text text_type_digits-default mr-2`}>{numberOfIngrs[card._id!] > 1 ? numberOfIngrs[card._id!] + ' X ' : ''}{card && card.price}</p>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n          </li>\r\n        ))} \r\n      </ul>\r\n      <div className={`${ModalStyles.priceContainer} mt-10`}>\r\n        <p className='text text_type_main-default text_color_inactive'>{`${currentDay}, в ${time} i-GMT+3` || 'Загрузка...'}</p>\r\n        <div className={`${ModalStyles.priceBox}`}>\r\n          <p className='text text_type_digits-default mr-2'>{totalPrice || 'Загрузка...'}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderData;\r\n","import React from \"react\";\r\nimport OrderData from \"../../components/Modal/OrderData\";\r\nimport AppStyles from '../../components/App/App.module.css';\r\n\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport { wsConnectionStart, wsConnectionClose } from \"../../services/actions/wsActions\";\r\nimport { wsAuthConnectionStart, wsAuthConnectionClose } from \"../../services/actions/wsAuthActions\";\r\n\r\nfunction OrderDetailsPage() {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const orderFeed = useSelector(\r\n    (state) => state.orderFeed\r\n  );\r\n\r\n  const isUserAuth = useSelector(\r\n    (state) => state.currentSession.isCurrentUserAuth\r\n  );\r\n\r\n  const userOrderFeed = useSelector(\r\n    (state) => state.userOrderFeed\r\n  );\r\n\r\n  const burgerIngredientsArray = useSelector(\r\n    (state) => state.burgerIngredients.burgerIngredientsArray\r\n  );\r\n\r\n  React.useEffect((): () => void => {\r\n    if (isUserAuth) {\r\n      dispatch(wsAuthConnectionStart());\r\n      return () => dispatch(wsAuthConnectionClose());\r\n    } else {\r\n      dispatch(wsConnectionStart());\r\n      return () => dispatch(wsConnectionClose());\r\n    }\r\n  }, [dispatch, isUserAuth]);\r\n\r\n  if (orderFeed.isPageLoading === true \r\n    || burgerIngredientsArray.length === 0 \r\n    || userOrderFeed.orderFeedData === undefined  \r\n    || orderFeed.orderFeedData === undefined\r\n    ) {\r\n    return <div className={`${AppStyles.centeredComponent} text text_type_main-large`}>Загрузка...</div>\r\n  }\r\n\r\n  return (\r\n    <OrderData \r\n      isModal={false}\r\n    />\r\n  );\r\n}\r\n\r\nexport default OrderDetailsPage;\r\n","import ModalStyles from './Modal.module.css';\r\nimport { useSelector } from \"../../services/hooks\";\r\n\r\nconst IngredientDetails = () => {\r\n\r\n  const selectedIngredient = useSelector(\r\n    (state) => state.burgerIngredients.selectedIngredient\r\n  );\r\n\r\n  const cardData = selectedIngredient;\r\n\r\n  return (\r\n    <div className={`${ModalStyles.modal__contentBox} pt-10 pb-15`}> \r\n      <h2 className={`${ModalStyles.modal__title_modified} text text_type_main-large pl-10`}>\r\n        Детали ингредиента\r\n      </h2>\r\n      <div className={`${ModalStyles.modal__imgContainer} mb-4`}>\r\n        <img src={cardData.image || ''} alt=\"tick animation\" className={ModalStyles.modal__ingImage} />\r\n      </div>\r\n      <p className=\"text text_type_main-medium mb-8\">\r\n        {cardData.name || ''}\r\n      </p>\r\n      <ul className={ModalStyles.modal__statsList}>\r\n        <li className={ModalStyles.modal__statsListItem}>\r\n          <p className={`${ModalStyles.modal__category} text text_type_main-default text_color_inactive`}>Калории,ккал</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{cardData.calories || ''}</p>\r\n        </li>\r\n        <li className={ModalStyles.modal__statsListItem}>\r\n          <p className={`${ModalStyles.modal__category} text text_type_main-default text_color_inactive`}>Белки, г</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{cardData.carbohydrates || ''}</p>\r\n        </li>\r\n        <li className={ModalStyles.modal__statsListItem}>\r\n          <p className={`${ModalStyles.modal__category} text text_type_main-default text_color_inactive`}>Жиры, г</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{cardData.fat || ''}</p>\r\n        </li>\r\n        <li className={ModalStyles.modal__statsListItem}>\r\n          <p className={`${ModalStyles.modal__category} text text_type_main-default text_color_inactive`}>Углеводы, г</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{cardData.proteins || ''}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default IngredientDetails;","export default __webpack_public_path__ + \"static/media/tick.887b83be.gif\";","import { useSelector } from \"../../services/hooks\";\r\n\r\nimport ModalStyles from \"./Modal.module.css\";\r\nimport tick from \"../../images/tick.gif\";\r\nimport loading from \"../../images/loading.svg\";\r\n\r\nfunction OrderDetails() {\r\n  const orderData = useSelector((state) => state.burgerConstructor.orderData);\r\n\r\n  return (\r\n    <div className={`${ModalStyles.modal__contentBox} pt-30 pb-30`}>\r\n      <h2\r\n        className={`${ModalStyles.modal__title_shadow} text text_type_digits-large mb-8`}\r\n      >\r\n        {orderData.order.number}\r\n      </h2>\r\n      <p\r\n        className={`${ModalStyles.modal__subtitle} text text_type_main-medium mb-15`}\r\n      >\r\n        идентификатор заказа\r\n      </p>\r\n      <div className={`${ModalStyles.modal__imgContainer} mb-15`}>\r\n        <img\r\n          src={tick || loading}\r\n          alt=\"tick animation\"\r\n          className={ModalStyles.modal__image}\r\n        />\r\n      </div>\r\n      <div className={ModalStyles.modal__textContainer}>\r\n        <p\r\n          className={`${ModalStyles.modal__text} text text_type_main-small mb-2`}\r\n        >\r\n          Ваш заказ начали готовить\r\n        </p>\r\n        <p\r\n          className={`${ModalStyles.modal__text} text text_type_main-default text_color_inactive`}\r\n        >\r\n          Дождитесь готовности на орбитальной станции\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderDetails;\r\n","import { Middleware } from \"redux\";\r\nimport { RootState } from \"../store\";\r\n\r\nimport {\r\n  WS_AUTH_CONNECTION_START,\r\n  WS_AUTH_CONNECTION_SUCCESS,\r\n  WS_AUTH_CONNECTION_ERROR,\r\n  WS_AUTH_CONNECTION_CLOSED,\r\n  WS_AUTH_GET_MESSAGE,\r\n  WS_AUTH_SEND_MESSAGE,\r\n} from '../actions/wsAuthActions';\r\n\r\nexport const socketAuthMiddleware: any = (WSS_URL: string): Middleware<{}, RootState> => {\r\n  return store => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return next => action => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === WS_AUTH_CONNECTION_START) {\r\n        const accessToken = localStorage.getItem(\"accessToken\");\r\n        const correctedToken = accessToken!.replace('Bearer ',''); \r\n        socket = new WebSocket(`${WSS_URL}?token=${correctedToken}`);\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = event => {\r\n          dispatch({ type: WS_AUTH_CONNECTION_SUCCESS, payload: event });\r\n        };\r\n\r\n        socket.onerror = event => {\r\n          dispatch({ type: WS_AUTH_CONNECTION_ERROR, payload: event });\r\n        };\r\n\r\n        socket.onmessage = event => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n\r\n          dispatch({ type:  WS_AUTH_GET_MESSAGE, payload: restParsedData });\r\n        };\r\n\r\n        socket.onclose = event => {\r\n          dispatch({ type: WS_AUTH_CONNECTION_CLOSED, payload: event });\r\n        };\r\n\r\n        if (type === WS_AUTH_SEND_MESSAGE) {\r\n          const message = { ...payload };\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};","import { Middleware } from \"redux\";\r\nimport { RootState } from \"../store\";\r\n\r\nimport {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE,\r\n  WS_SEND_MESSAGE,\r\n} from '../actions/wsActions';\r\n\r\nexport const socketMiddleware: any = (wsUrl: string): Middleware<{}, RootState> => {\r\n  return store => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return next => action => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === WS_CONNECTION_START) {\r\n        socket = new WebSocket(`${wsUrl}`);\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = event => {\r\n          dispatch({ type: WS_CONNECTION_SUCCESS, payload: event });\r\n        };\r\n\r\n        socket.onerror = event => {\r\n          dispatch({ type: WS_CONNECTION_ERROR, payload: event });\r\n        };\r\n\r\n        socket.onmessage = event => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n\r\n          dispatch({ type:  WS_GET_MESSAGE, payload: restParsedData });\r\n        };\r\n\r\n        socket.onclose = event => {\r\n          dispatch({ type: WS_CONNECTION_CLOSED, payload: event });\r\n        };\r\n\r\n        if (type === WS_SEND_MESSAGE) {\r\n          const message = { ...payload };\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};","import ModalStyles from './Modal.module.css';\r\n\r\ninterface IModalOverlay {\r\n  closeModal: () => void;\r\n}\r\n\r\nconst ModalOverlay: React.FC<IModalOverlay> = (props) => {\r\n  return (\r\n      <div className={ModalStyles.modal_overlay} onClick={props.closeModal}>\r\n        {props.children}\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default ModalOverlay;","import ModalStyles from './Modal.module.css';\r\nimport React from 'react';\r\nimport ModalOverlay from './ModalOverlay';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\ninterface IModal {\r\n  isOpen: boolean;\r\n  closeModal: () => void;\r\n}\r\n\r\nconst Modal: React.FC<IModal> = (props) => {\r\n\r\n  React.useEffect(() => {\r\n    const closeModal = (evt: KeyboardEvent) => {\r\n      if (evt.key === \"Escape\") {\r\n        props.closeModal();\r\n      }\r\n    }\r\n    window.addEventListener('keyup', closeModal);\r\n    return () => window.removeEventListener('keyup', closeModal)\r\n  }, [ props.isOpen ]);\r\n\r\n  return(\r\n    <section className={props.isOpen ? ModalStyles.modal_opened : ModalStyles.modal}>\r\n      <div className={ModalStyles.modal__container}>\r\n        {props.children}\r\n        <button type=\"button\" className={ModalStyles.modal__close_modified} onClick={() => props.closeModal()}>\r\n          <CloseIcon type=\"primary\" />\r\n        </button>\r\n      </div>\r\n      <ModalOverlay \r\n        closeModal={props.closeModal}\r\n      />\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Modal;","import ModalStyles from './Modal.module.css';\r\nimport loading from '../../images/loading.svg';\r\nimport ModalOverlay from './ModalOverlay';\r\n\r\ninterface ILoading {\r\n  isOpen: boolean;\r\n}\r\n\r\nconst Loading:React.FC<ILoading> = (props) => {\r\n\r\n  return (\r\n    <div className={props.isOpen ? ModalStyles.modal_opened : ModalStyles.modal}>\r\n      <img src={loading} className={ModalStyles.modal__loading} alt=\"loading animation\" />\r\n      <ModalOverlay \r\n        closeModal={() => null}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loading;","import React from \"react\";\r\nimport AppStyles from \"./App.module.css\";\r\n\r\nimport { Switch, useHistory, Route, useLocation } from \"react-router-dom\";\r\n\r\nimport { getIngredientsData } from \"../../services/actions/burgerIngredients\";\r\nimport { getCurrentUser } from \"../../services/actions/currentSession\";\r\n\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport ProtectedRouteAuth from \"../ProtectedRoute/ProtectedRouteAuth\";\r\n\r\nimport AppHeader from \"../AppHeader/AppHeader\";\r\nimport BurgerIngredients from \"../BurgerIngredients/BurgerIngredietns\";\r\nimport BurgerConstructor from \"../BurgerConstructor/BurgerConstructor\";\r\nimport Account from \"../../pages/Account/Account\";\r\n\r\nimport Login from \"../../pages/Authorization/Login\";\r\nimport Register from \"../../pages/Authorization/Register\";\r\nimport ForgotPassword from \"../../pages/Authorization/ForgotPassword\";\r\nimport RecoverPassword from \"../../pages/Authorization/RecoverPassword\";\r\nimport IngredientDetailsPage from \"../../pages/IngredientDetailsPage/IngredientDetailsPage\";\r\nimport OrderFeed from \"../../pages/OrderFeed/OrderFeed\";\r\nimport OrderDetailsPage from \"../../pages/OrderDetailsPage/OrderDetailsPage\";\r\nimport NotFound from \"../../pages/NotFound/NotFound\";\r\n\r\nimport IngredientDetails from \"../Modal/IngredientDetails\";\r\nimport OrderDetails from \"../Modal/OrderDetails\";\r\nimport OrderData from \"../Modal/OrderData\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Loading from \"../Modal/Loading\";\r\n\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { TLocationState } from '../../types';\r\n\r\nconst App = () => {\r\n\r\n  const [isModalOpenIngredients, setModalOpenIngredients] =\r\n    React.useState<boolean>(false);\r\n  const [isModalOpenOrder, setModalOpenOrder] = React.useState<boolean>(false);\r\n  const [isModalOpenOrderData, setModalOpenOrderData] = React.useState<boolean>(false);\r\n  const [isModalOpenUserOrderData, setModalOpenUserOrderData] = React.useState<boolean>(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation<TLocationState>();\r\n  const background =\r\n    history.action === \"PUSH\" && location.state && location.state.background;\r\n\r\n  const isPageLoading = useSelector(\r\n    (state) => state.burgerIngredients.isPageLoading\r\n  );\r\n\r\n  const isOrderLoading = useSelector(\r\n    (state) => state.burgerConstructor.isPageLoading\r\n  );\r\n\r\n  const isAccountLoading = useSelector(\r\n    (state) => state.currentSession.isAccountLoading\r\n  );\r\n\r\n  const IngredientModal = <IngredientDetails />;\r\n  const OrderModal = <OrderDetails />;\r\n  const OrderDataModal = <OrderData isModal={true}/>\r\n\r\n  function handleModalOpenIngredients() {\r\n    setModalOpenIngredients(true);\r\n  }\r\n\r\n  function handleModalCloseIngredients() {\r\n    setModalOpenIngredients(false);\r\n  }\r\n\r\n  function handleModalOpenOrder() {\r\n    setModalOpenOrder(true);\r\n  }\r\n\r\n  function handleModalCloseOrder() {\r\n    setModalOpenOrder(false);\r\n  }\r\n\r\n  function handleModalOpenOrderData() {\r\n    setModalOpenOrderData(true);\r\n  }\r\n\r\n  function handleModalCloseOrderData() {\r\n    setModalOpenOrderData(false);\r\n  }\r\n\r\n  function handleModalOpenUserOrderData() {\r\n    setModalOpenUserOrderData(true);\r\n  }\r\n\r\n  function handleModalCloseUserOrderData() {\r\n    setModalOpenUserOrderData(false);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const refreshJwt = localStorage.getItem(\"refreshToken\");\r\n    dispatch(getIngredientsData());\r\n    if (refreshJwt) {\r\n      dispatch(getCurrentUser());\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={AppStyles.App}>\r\n      <AppHeader />\r\n      <main className={AppStyles.componentContainer}>\r\n        <Switch location={background || location}>\r\n          <Route path=\"/\" exact={true}>\r\n            <DndProvider backend={HTML5Backend}>\r\n              <BurgerIngredients openModal={handleModalOpenIngredients} />\r\n              <BurgerConstructor openModal={handleModalOpenOrder} />\r\n            </DndProvider>\r\n          </Route>\r\n          <Route path=\"/ingredient/:id\" exact={true}>\r\n            <IngredientDetailsPage />\r\n          </Route>\r\n          <ProtectedRouteAuth path=\"/login\">\r\n            <Login />\r\n          </ProtectedRouteAuth>\r\n          <ProtectedRouteAuth path=\"/register\">\r\n            <Register />\r\n          </ProtectedRouteAuth>\r\n          <ProtectedRouteAuth path=\"/forgot-password\">\r\n            <ForgotPassword />\r\n          </ProtectedRouteAuth>\r\n          <ProtectedRoute path=\"/reset-password\" redirect={true}>\r\n            <RecoverPassword />\r\n          </ProtectedRoute>\r\n          <Route path=\"/feed\" exact={true}>\r\n            <OrderFeed \r\n              openModal={handleModalOpenOrderData}\r\n            />\r\n          </Route>\r\n          <Route path=\"/feed/:id\" exact={true}>\r\n            <OrderDetailsPage />\r\n          </Route>\r\n          <Route path=\"/account/order-history/:id\" exact={true}>\r\n            <OrderDetailsPage />\r\n          </Route>\r\n          <ProtectedRoute path=\"/account\" redirect={false}>\r\n            <Account \r\n              openModal={handleModalOpenUserOrderData}\r\n            />\r\n          </ProtectedRoute>\r\n          <Route>\r\n            <NotFound />\r\n          </Route>\r\n        </Switch>\r\n      </main>\r\n      {background && (\r\n        <Route\r\n          path=\"/ingredient/:id\"\r\n          children={\r\n            <Modal\r\n              isOpen={isModalOpenIngredients}\r\n              closeModal={handleModalCloseIngredients}\r\n              children={IngredientModal}\r\n            />\r\n          }\r\n        />\r\n      )}\r\n      <Modal\r\n        isOpen={isModalOpenOrder}\r\n        closeModal={handleModalCloseOrder}\r\n        children={OrderModal}\r\n      />\r\n      {background && (\r\n        <Route\r\n          path=\"/feed/:id\"\r\n          children={\r\n            <Modal\r\n              isOpen={isModalOpenOrderData}\r\n              closeModal={handleModalCloseOrderData}\r\n              children={OrderDataModal}\r\n            />\r\n          }\r\n        />\r\n      )}\r\n      {background && (\r\n        <Route\r\n          path=\"/account/order-history/:id\"\r\n          children={\r\n            <Modal\r\n              isOpen={isModalOpenUserOrderData}\r\n              closeModal={handleModalCloseUserOrderData}\r\n              children={OrderDataModal}\r\n            />\r\n          }\r\n        />\r\n      )}\r\n      <Loading isOpen={isPageLoading || isOrderLoading || isAccountLoading} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\r\n  GET_BURGER_INGREDIENTS_REQUEST,\r\n  GET_BURGER_INGREDIENTS_SUCCESS,\r\n  GET_BURGER_INGREDIENTS_FAILED,\r\n  GET_SELECTED_BUN,\r\n  GET_SELECTED_INGREDIENT,\r\n\r\n  TBurgerIngredientsActions\r\n} from \"../actions/burgerIngredients\";\r\n\r\nimport { DEFAULT_BUN, DEFAULT_ING } from '../../utils/constants';\r\nimport { TBasketCard } from '../../types';\r\n\r\ntype TBurgerIngredientsState = {\r\n  burgerIngredientsArray: Array<TBasketCard>,\r\n  burgerIngredientsRequest: boolean,\r\n  burgerIngredientsFailed: boolean,\r\n\r\n  selectedBun: TBasketCard,\r\n  selectedIngredient: TBasketCard,\r\n  isPageLoading: boolean,\r\n} \r\n\r\nconst initialState: TBurgerIngredientsState = {\r\n  burgerIngredientsArray: [],\r\n  burgerIngredientsRequest: false,\r\n  burgerIngredientsFailed: false,\r\n\r\n  selectedBun: DEFAULT_BUN,\r\n  selectedIngredient: DEFAULT_ING,\r\n  isPageLoading: true,\r\n};\r\n\r\nexport const burgerIngredientsReducer = (state = initialState, action: TBurgerIngredientsActions): TBurgerIngredientsState => {\r\n  switch (action.type) {\r\n    case GET_BURGER_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        burgerIngredientsRequest: true,\r\n      };\r\n    }\r\n    case GET_BURGER_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        burgerIngredientsArray: action.burgerIngredientsArray,\r\n        burgerIngredientsRequest: false,\r\n        burgerIngredientsFailed: false,\r\n        isPageLoading: false,\r\n      };\r\n    }\r\n    case GET_BURGER_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        burgerIngredientsFailed: true,\r\n        burgerIngredientsRequest: false,\r\n      };\r\n    }\r\n    case GET_SELECTED_BUN: {\r\n      return {\r\n        ...state,\r\n        selectedBun: action.selectedBun\r\n      }\r\n    }\r\n    case GET_SELECTED_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: action.selectedIngredient\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import {\r\n  GET_BURGER_CONSTRUCTOR_REQUEST,\r\n  GET_BURGER_CONSTRUCTOR_SUCCESS,\r\n  GET_BURGER_CONSTRUCTOR_FAILED,\r\n  ADD_BURGER_CONSTRUCTOR_ITEM,\r\n  ADD_BUN_FAILED,\r\n  MOVE_BURGER_CONSTRUCTOR_ITEM,\r\n  DELETE_BURGER_CONSTRUCTOR_ITEM,\r\n  RESET_BURGER_CONSTRUCTOR,\r\n  TBurgerConstructorActions\r\n} from \"../actions/burgerConstructor\";\r\n\r\nimport { DEFAULT_ORDER } from '../../utils/constants';\r\nimport { TBasketCard, TOrderData } from '../../types';\r\n\r\ntype TBurgerConstructorState = {\r\n  burgerConstructorArray: Array<TBasketCard>,\r\n  burgerConstructorRequest: boolean,\r\n  burgerConstructorFailed: boolean,\r\n\r\n  orderData: TOrderData,\r\n  isPageLoading: boolean,\r\n} \r\n\r\nconst initialState: TBurgerConstructorState = {\r\n  burgerConstructorArray: [],\r\n  burgerConstructorRequest: false,\r\n  burgerConstructorFailed: false,\r\n\r\n  orderData: DEFAULT_ORDER,\r\n  isPageLoading: false,\r\n};\r\n\r\nexport const burgerConstructorReducer = (state = initialState, action: TBurgerConstructorActions): TBurgerConstructorState => {\r\n  switch (action.type) {\r\n    case GET_BURGER_CONSTRUCTOR_REQUEST: {\r\n      return {\r\n        ...state,\r\n        burgerConstructorRequest: true,\r\n        isPageLoading: true,\r\n      };\r\n    }\r\n    case GET_BURGER_CONSTRUCTOR_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        burgerConstructorRequest: false,\r\n        burgerConstructorFailed: false,\r\n        orderData: action.orderData,\r\n        isPageLoading: false,\r\n      };\r\n    }\r\n    case GET_BURGER_CONSTRUCTOR_FAILED: {\r\n      return {\r\n        ...state,\r\n        burgerConstructorRequest: false,\r\n        burgerConstructorFailed: true,\r\n        isPageLoading: false,\r\n      };\r\n    }\r\n    case ADD_BURGER_CONSTRUCTOR_ITEM: {\r\n      return {\r\n        ...state,\r\n        burgerConstructorArray: [\r\n          ...state.burgerConstructorArray, \r\n          action.burgerConstructorArray\r\n        ],\r\n      };\r\n    }\r\n    case ADD_BUN_FAILED: {\r\n      return state;\r\n    }\r\n    case MOVE_BURGER_CONSTRUCTOR_ITEM: {\r\n      const array = [...state.burgerConstructorArray];\r\n\r\n      const dragItem = array[action.dragIndex];\r\n      const hoveredItem = array[action.hoverIndex];\r\n\r\n      array[action.hoverIndex] = dragItem;\r\n      array[action.dragIndex] = hoveredItem;\r\n     \r\n      return {\r\n        ...state,\r\n        burgerConstructorArray: array,\r\n      };\r\n    }\r\n    case DELETE_BURGER_CONSTRUCTOR_ITEM: {\r\n      return {\r\n        ...state,\r\n        burgerConstructorArray: [\r\n          ...state.burgerConstructorArray,\r\n        ].filter((item, index) => {\r\n          return index !== action.index;\r\n        }),\r\n      };\r\n    }\r\n    case RESET_BURGER_CONSTRUCTOR: {\r\n      return {\r\n        ...state,\r\n        burgerConstructorArray: action.burgerConstructorArray,\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import {\r\n  GET_CURRENT_USER_REQUEST,\r\n  GET_CURRENT_USER_SUCCESS,\r\n  GET_CURRENT_USER_FAILED,\r\n\r\n  REGISTER_USER_REQUEST,\r\n  REGISTER_USER_SUCCESS,\r\n  REGISTER_USER_FAILED,\r\n\r\n  LOGIN_USER_REQUEST,\r\n  LOGIN_USER_SUCCESS,\r\n  LOGIN_USER_FAILED,\r\n\r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n  FORGOT_PASSWORD_FAILED,\r\n\r\n  RECOVER_PASSWORD_REQUEST,\r\n  RECOVER_PASSWORD_SUCCESS,\r\n  RECOVER_PASSWORD_FAILED,\r\n\r\n  LOGOUT_USER_REQUEST,\r\n  LOGOUT_USER_SUCCESS,\r\n  LOGOUT_USER_FAILED,\r\n\r\n  TCurrentSessionAction\r\n} from \"../actions/currentSession\";\r\n\r\nimport { DEFAULT_USER } from '../../utils/constants';\r\nimport { TUser } from '../../types';\r\n\r\ntype TCurrentSessionState = {\r\n  currentUser: TUser,\r\n  currentUserRequest: boolean,\r\n  currentUserFailed: boolean,\r\n  currentUserChecked: boolean,\r\n\r\n  registerRequest: boolean,\r\n  registerFailed: boolean,\r\n\r\n  loginRequest: boolean,\r\n  loginFailed: boolean,\r\n\r\n  logoutRequest: boolean,\r\n  logoutFailed: boolean,\r\n\r\n  isAccountLoading: boolean,\r\n  isCurrentUserAuth: boolean,\r\n  isUserResetPassword: boolean,\r\n} \r\n\r\nconst initialState: TCurrentSessionState = {\r\n  currentUser: DEFAULT_USER,\r\n  currentUserRequest: false,\r\n  currentUserFailed: false,\r\n  currentUserChecked: false,\r\n\r\n  registerRequest: false,\r\n  registerFailed: false,\r\n\r\n  loginRequest: false,\r\n  loginFailed: false,\r\n\r\n  logoutRequest: false,\r\n  logoutFailed: false,\r\n\r\n  isAccountLoading: false,\r\n  isCurrentUserAuth: false,\r\n  isUserResetPassword: false,\r\n};\r\n\r\nexport const currentSessionReducer = (state = initialState, action: TCurrentSessionAction): TCurrentSessionState => {\r\n  switch (action.type) {\r\n    case GET_CURRENT_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        currentUserRequest: true,\r\n        isAccountLoading: true,\r\n        currentUserChecked: false,\r\n      };\r\n    }\r\n    case GET_CURRENT_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        currentUserRequest: false,\r\n        currentUserFailed: false,\r\n        currentUser: action.currentUser,\r\n        isCurrentUserAuth: true,\r\n        isAccountLoading: false,\r\n        currentUserChecked: true,\r\n      };\r\n    }\r\n    case GET_CURRENT_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        currentUserRequest: false,\r\n        currentUserFailed: true,\r\n        isAccountLoading: false,\r\n        currentUserChecked: true,\r\n      };\r\n    }\r\n\r\n    case REGISTER_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registerRequest: true,\r\n        isAccountLoading: true,\r\n        currentUserChecked: false,\r\n      };\r\n    }\r\n    case REGISTER_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerFailed: false,\r\n        isAccountLoading: false,\r\n      };\r\n    }\r\n    case REGISTER_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerFailed: true,\r\n      };\r\n    }\r\n\r\n    case LOGIN_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loginRequest: true,\r\n        isAccountLoading: true,\r\n      };\r\n    }\r\n    case LOGIN_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: false,\r\n        currentUser: action.currentUser,\r\n        isUserResetPassword: false,\r\n        isCurrentUserAuth: true,\r\n        isAccountLoading: false\r\n      };\r\n    }\r\n    case LOGIN_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: true,\r\n        isCurrentUserAuth: false,\r\n        isAccountLoading: false,\r\n      };\r\n    }\r\n\r\n    case LOGOUT_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: true,\r\n        isAccountLoading: true,\r\n      };\r\n    }\r\n    case LOGOUT_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutFailed: false,\r\n        isCurrentUserAuth: false,\r\n        isAccountLoading: false\r\n      };\r\n    }\r\n    case LOGOUT_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutFailed: true,\r\n        isAccountLoading: false,\r\n      };\r\n    }\r\n\r\n    case FORGOT_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isUserResetPassword: true,\r\n        isAccountLoading: true,\r\n      };\r\n    }\r\n    case FORGOT_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isUserResetPassword: true,\r\n        isAccountLoading: false\r\n      };\r\n    }\r\n    case FORGOT_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        isAccountLoading: false,\r\n      };\r\n    }\r\n\r\n    case RECOVER_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isAccountLoading: true,\r\n      };\r\n    }\r\n    case RECOVER_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isUserResetPassword: false,\r\n        isAccountLoading: false\r\n      };\r\n    }\r\n    case RECOVER_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        isAccountLoading: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import {\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE,\r\n  WS_CONNECTION_START,\r\n} from \"../actions/wsActions\";\r\n\r\nimport { TWsActions } from \"../actions/wsActions\";\r\nimport { TFeedState } from \"../../types\";\r\n\r\nexport const initialState: TFeedState = {\r\n  wsConnected: false,\r\n  wsError: null,\r\n  orderFeedData: [],\r\n  isPageLoading: true,\r\n};\r\n\r\nexport const orderFeedReducer = (state = initialState, action: TWsActions) => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_START:\r\n      return {\r\n        isPageLoading: true,\r\n      };\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsError: null,\r\n        wsConnected: true,\r\n      };\r\n\r\n    case WS_CONNECTION_ERROR:\r\n      console.log(action.payload);\r\n      return {\r\n        ...state,\r\n        wsError: action.payload,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsError: null,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        wsError: null,\r\n        orderFeedData: action.payload,\r\n        isPageLoading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import {\r\n  WS_AUTH_CONNECTION_SUCCESS,\r\n  WS_AUTH_CONNECTION_ERROR,\r\n  WS_AUTH_CONNECTION_CLOSED,\r\n  WS_AUTH_GET_MESSAGE,\r\n  WS_AUTH_CONNECTION_START,\r\n} from \"../actions/wsAuthActions\";\r\n\r\nimport { TWsAuthActions } from \"../actions/wsAuthActions\";\r\nimport { TFeedState } from \"../../types\";\r\n\r\nexport const initialState: TFeedState = {\r\n  wsConnected: false,\r\n  wsError: null,\r\n  orderFeedData: [],\r\n  isPageLoading: true,\r\n};\r\n\r\nexport const userOrderFeedReducer = (state = initialState, action: TWsAuthActions) => {\r\n  switch (action.type) {\r\n    case WS_AUTH_CONNECTION_START:\r\n      return {\r\n        isPageLoading: true,\r\n      };\r\n    case WS_AUTH_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsError: null,\r\n        wsConnected: true,\r\n      };\r\n\r\n    case WS_AUTH_CONNECTION_ERROR:\r\n      console.log(action.payload);\r\n      return {\r\n        ...state,\r\n        wsError: action.payload,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_AUTH_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsError: null,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_AUTH_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        wsError: null,\r\n        orderFeedData: action.payload,\r\n        isPageLoading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { combineReducers } from \"redux\";\r\n\r\nimport { burgerIngredientsReducer } from \"./burgerIngredients\";\r\nimport { burgerConstructorReducer } from \"./burgerConstructor\";\r\nimport { currentSessionReducer } from \"./currentSession\";\r\nimport { orderFeedReducer } from './orderFeed';\r\nimport { userOrderFeedReducer } from \"./userOrderFeed\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  burgerIngredients: burgerIngredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  currentSession: currentSessionReducer,\r\n  orderFeed: orderFeedReducer,\r\n  userOrderFeed: userOrderFeedReducer,\r\n});","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport { rootReducer } from \"./reducers\";\r\nimport { socketMiddleware } from './middlewares/socketMiddleware';\r\nimport { socketAuthMiddleware } from \"./middlewares/socketAuthMiddleware\";\r\n\r\nimport { WSS_URL } from \"../utils/constants\";\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n\r\nexport const store = createStore(rootReducer, composeWithDevTools(\r\n  applyMiddleware(\r\n    socketMiddleware(`${WSS_URL}/orders/all`),\r\n    socketAuthMiddleware(`${WSS_URL}/orders`),\r\n    thunk\r\n  )\r\n));","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { store } from './services/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"account\":\"Account_account__2U-MY\",\"nav\":\"Account_nav__2har8\",\"contentBox\":\"Account_contentBox__1y3Vs\",\"list\":\"Account_list__3QiF_\",\"listItem\":\"Account_listItem__25wG7\",\"link\":\"Account_link__1_a97\",\"link_active\":\"Account_link_active__xkQy4\",\"button\":\"Account_button__1QO24\",\"text\":\"Account_text__2pVgU\",\"profile\":\"Account_profile__17xTJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentBox\":\"IngredientDetailsPage_contentBox__-At9O\",\"title\":\"IngredientDetailsPage_title__1ls7i\",\"title_shadow\":\"IngredientDetailsPage_title_shadow__1Z99R IngredientDetailsPage_title__1ls7i\",\"title_modified\":\"IngredientDetailsPage_title_modified__1gxia IngredientDetailsPage_title__1ls7i\",\"image\":\"IngredientDetailsPage_image__10Jbh\",\"ingImage\":\"IngredientDetailsPage_ingImage__2r0X0\",\"textContainer\":\"IngredientDetailsPage_textContainer__2SNjr\",\"statsList\":\"IngredientDetailsPage_statsList__ewfMD\",\"statsListItem\":\"IngredientDetailsPage_statsListItem__E2csI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderFeed\":\"OrderFeed_orderFeed__3b_yZ\",\"contentBox\":\"OrderFeed_contentBox__2246m\",\"list\":\"OrderFeed_list__O7_pr\",\"ordersData\":\"OrderFeed_ordersData__S1zvW\",\"orderStatusBox\":\"OrderFeed_orderStatusBox__1xEe1\",\"orderList\":\"OrderFeed_orderList__1rfUU\",\"orderListReady\":\"OrderFeed_orderListReady__3O1nd OrderFeed_orderList__1rfUU\",\"number\":\"OrderFeed_number__3Fdu1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basket\":\"BurgerConstructor_basket__3I_vO\",\"basket__list\":\"BurgerConstructor_basket__list__L94FO\",\"basket__list_modified\":\"BurgerConstructor_basket__list_modified__1OyK_ BurgerConstructor_basket__list__L94FO\",\"basket__listItem\":\"BurgerConstructor_basket__listItem__3Gse5\",\"constructor-element__text\":\"BurgerConstructor_constructor-element__text__3lEoy\",\"basket__listContainer\":\"BurgerConstructor_basket__listContainer__1ZOr2\",\"listItem\":\"BurgerConstructor_listItem__3l9-B\",\"basket__container\":\"BurgerConstructor_basket__container__deIFk\",\"basket__totalContainer\":\"BurgerConstructor_basket__totalContainer__3ac6A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__HdcQe\",\"profileList\":\"Profile_profileList__QHa0F\",\"profileListItem\":\"Profile_profileListItem__aNjNP\",\"buttonBox\":\"Profile_buttonBox__1717I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"NotFound_notFound__VL6Sd\",\"title\":\"NotFound_title__1bVC4\",\"text\":\"NotFound_text__3hN8E\",\"link\":\"NotFound_link__rh8I0\",\"img\":\"NotFound_img__2SYiW\",\"imgLoading\":\"NotFound_imgLoading__1wanW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"BurgerIngredients_ingredients__227KB\",\"ingredients__menuContainer\":\"BurgerIngredients_ingredients__menuContainer__gtb0t\",\"ingredients__list\":\"BurgerIngredients_ingredients__list__b1Mcz\",\"ingredients__basketList\":\"BurgerIngredients_ingredients__basketList__2FWCl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"BurgerIngredient_ingredient__3DZvP\",\"ingredient__image\":\"BurgerIngredient_ingredient__image__327UN\",\"ingredient__priceBox\":\"BurgerIngredient_ingredient__priceBox__3OwcV\",\"ingredient__price\":\"BurgerIngredient_ingredient__price__2sL1y\",\"ingredient__text\":\"BurgerIngredient_ingredient__text__2ZWzZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__mDZ2B\",\"modal_opened\":\"Modal_modal_opened__2oaeh Modal_modal__mDZ2B\",\"modal_overlay\":\"Modal_modal_overlay__2W_vi\",\"modal__loading\":\"Modal_modal__loading__3fd3b\",\"modal__container\":\"Modal_modal__container__1-g3S\",\"modal__contentBox\":\"Modal_modal__contentBox__3Vzc_\",\"modal__title\":\"Modal_modal__title__3cfzx\",\"modal__title_shadow\":\"Modal_modal__title_shadow__meMnv Modal_modal__title__3cfzx\",\"modal__title_modified\":\"Modal_modal__title_modified__3GmLv Modal_modal__title__3cfzx\",\"modal__image\":\"Modal_modal__image__1IXAr\",\"modal__ingImage\":\"Modal_modal__ingImage__1KZff\",\"modal__textContainer\":\"Modal_modal__textContainer__kjDSl\",\"modal__statsList\":\"Modal_modal__statsList__2CYKv\",\"modal__statsListItem\":\"Modal_modal__statsListItem__N3-T-\",\"modal__close\":\"Modal_modal__close__2bOjO\",\"orderBox\":\"Modal_orderBox__lIteW Modal_modal__contentBox__3Vzc_\",\"pageBox\":\"Modal_pageBox__3ZL9N\",\"list\":\"Modal_list__1Ioy1\",\"listItem\":\"Modal_listItem__2qGn0\",\"imgBox\":\"Modal_imgBox__1pWdr\",\"img\":\"Modal_img__2cgAT\",\"priceBox\":\"Modal_priceBox__2rXXe\",\"priceContainer\":\"Modal_priceContainer__1h9r_ Modal_priceBox__2rXXe\",\"modal__close_modified\":\"Modal_modal__close_modified__2D-Gg Modal_modal__close__2bOjO\",\"modal__tooltip\":\"Modal_modal__tooltip__WxtMs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Auth_login__7zL7F\",\"form\":\"Auth_form__1CGbD\",\"fieldset\":\"Auth_fieldset__1rbsq\",\"link\":\"Auth_link__22eIS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basketItem__listItem\":\"BasketItem_basketItem__listItem__1cWEV\",\"iconBox\":\"BasketItem_iconBox__2WeFk\"};"],"sourceRoot":""}